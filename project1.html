<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vincent">
<meta name="dcterms.date" content="2024-04-14">

<title>Project 1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="project1_files/libs/clipboard/clipboard.min.js"></script>
<script src="project1_files/libs/quarto-html/quarto.js"></script>
<script src="project1_files/libs/quarto-html/popper.min.js"></script>
<script src="project1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="project1_files/libs/quarto-html/anchor.min.js"></script>
<link href="project1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="project1_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="project1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="project1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="project1_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Project 1</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Vincent </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 14, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="markov-chains" class="level1">
<h1>Markov Chains</h1>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Here is the system of equations that represents the scenario.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="systemofequations.jpeg" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Systems of equations</figcaption>
</figure>
</div>
<p>Here is the transition matrix. The market shares after 3 years are shown below given that the initial market shares are equal, which meant that the initial vector is [1/3, 1/3, 1/3].</p>
<div class="cell" data-execution_count="2">
<div class="cell-output cell-output-display">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}0.5 &amp; 0.2 &amp; 0.3\\0.2 &amp; 0.6 &amp; 0.1\\0.3 &amp; 0.2 &amp; 0.6\end{matrix}\right]\)</span></p>
</div>
<div class="cell-output cell-output-display">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}0.339\\0.275333333333333\\0.385666666666667\end{matrix}\right]\)</span></p>
</div>
</div>
</section>
<section id="recommendation" class="level2">
<h2 class="anchored" data-anchor-id="recommendation">Recommendation</h2>
<p>As seen in the below graphs, the effect of launching campaign 2 is better than campaign 1. Note that campaign 0 shows what would happen if no campiagn is launched. In that scenario, company C would have the highest market share whereas we would be stuck in the middle. Launching campaign 1 would not change this situation but we would be closer to C. However, launching campaign 2 would allow us to surpass C and have the highest market share, bringing us to 0.4. asdff</p>
<div class="cell" data-execution_count="3">
<div class="cell-output cell-output-display">
<p><img src="project1_files/figure-html/cell-4-output-1.png" width="597" height="449"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="project1_files/figure-html/cell-4-output-2.png" width="606" height="449"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="project1_files/figure-html/cell-4-output-3.png" width="597" height="449"></p>
</div>
</div>
<p>You might have noticed that we’re assuming that the market shares are equal at the beginning. However, the transition matrix is a stable discrete dynamical system which would have the same equilibrium state regardless of the initial vector. To identify a stable system, we need the dominant eigenvalue to be equal to 1 which is the case here. An example is seen below where the initial market shares are [0, 0, 1].</p>
<div class="cell" data-execution_count="4">
<div class="cell-output cell-output-display" data-execution_count="48">
<pre><code>{1.00000000000000: 1, 0.461803398874989: 1, 0.238196601125011: 1}</code></pre>
</div>
</div>
<div class="cell" data-execution_count="5">
<div class="cell-output cell-output-display">
<p><img src="project1_files/figure-html/cell-6-output-1.png" width="589" height="449"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="project1_files/figure-html/cell-6-output-2.png" width="589" height="449"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="project1_files/figure-html/cell-6-output-3.png" width="589" height="449"></p>
</div>
</div>
<p>Further analysis shows that there is a diminishing marginal return if more money is spent on a campaign to take more customers away from B or C. The is shown as the curves are concave down. Additionally, these graphs also show that spending money on taking C’s customers is more valuable than taking B’s because A increases around 0.15 for the former and 0.1 for the latter. Taking C’s customers also makes A the market leader by a significant margin. It should be noted that this also assumes the amount of money it takes to take B’s customers is the same as taking C’s customers.</p>
<p>Additionally, although the initial market share doesn’t matter, it is important to note that we’re assuming these events are independent of each other. For example, perhaps customers are more likely to follow the pack if a majority of the population are using companies which means that the market would be more volatile than my simulations suggest. This would also mean that it’s more important for us to have the highest market share at the beginning, making initial market shares more important.</p>
</section>
</section>
<section id="gas-in-a-tube" class="level1">
<h1>Gas in a Tube</h1>
<p>The time dependent reaction diffusion equation is shown below and I translated it to matrix form.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="reactiondiffusionequation.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Equation</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="reactiondiffusionmatrix.jpeg" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Matrix Form</figcaption>
</figure>
</div>
<p>Note that because there is no continous source of gas, the <em>kf</em> is 0.</p>
<p>After this, we can factor the <em>y</em> vector at time <em>t</em> out (by multiplying the lone <em>y</em> vector by the identity matrix). This gives us a way to walk forward to the densities at time <em>t+1</em> from the densities at time <em>t</em>. To go backwards, we can take the inverse on both sides.</p>
<p>This allows us to estimate the value of D, the diffusion constant by walking backwards from the given densities at t = 270 to try to match the given densities at t = 240. I got a value of D = 0.00004.</p>
<p>From there, we can continue going backwards to t = 0, giving us an initial concentration of ​0, 0.0149, 1.01, 6.36, 1.01, 0.0149,0 at each node.</p>
<p>Then, we can go forwards to t = 210 and t = 310 by using the previous equation get the concentrations at those times.</p>
<div class="cell" data-execution_count="6">
<div class="cell-output cell-output-display">
<pre><code>'t = 240'</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}0\\0.01\\1.16\\3.69\\1.16\\0.01\\0\end{matrix}\right]\)</span></p>
</div>
<div class="cell-output cell-output-display">
<pre><code>'t = 0'</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}0\\0.0149\\1.01\\6.36\\1.01\\0.0149\\0\end{matrix}\right]\)</span></p>
</div>
<div class="cell-output cell-output-display">
<pre><code>'t = 210'</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}0.0448\\0.351\\1.74\\4.15\\1.74\\0.351\\0.0448\end{matrix}\right]\)</span></p>
</div>
<div class="cell-output cell-output-display">
<pre><code>'t = 310'</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}0.0872\\0.496\\1.83\\3.56\\1.83\\0.496\\0.0872\end{matrix}\right]\)</span></p>
</div>
</div>
<p>I’ve also included an animation of the gas concentrations from the initial state to t = 310. One can see how the points I calculated comes close the points given. A solution that allows negative values would come closer to the given values but here, I’ve coverted decimals to fractions with a tolerance of 0.01.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="gas.gif" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Diffusion Over Time</figcaption>
</figure>
</div>
</section>
<section id="sports-ranking" class="level1">
<h1>Sports Ranking</h1>
<section id="win-loss-ratio" class="level2">
<h2 class="anchored" data-anchor-id="win-loss-ratio">Win Loss Ratio</h2>
<p>When first ranking the teams based on win loss ratio, we see that team 7 is the best team with a ratio of 5 and Team 4 is the worst team with a ratio of 0.2. This is done by summing the <em>i</em>th row to get the number of wins and the <em>i</em>th column to get the number of losses and then dividing to get the win loss ratio of the <em>i</em>th team.</p>
<div class="cell" data-execution_count="8">
<div class="cell-output cell-output-display">
<pre><code>array([[0., 1., 0., 1., 0., 0., 0.],
       [0., 0., 0., 1., 0., 1., 0.],
       [1., 1., 0., 1., 1., 0., 0.],
       [0., 0., 0., 0., 1., 0., 0.],
       [1., 1., 0., 0., 0., 1., 1.],
       [1., 0., 1., 1., 0., 0., 0.],
       [1., 1., 1., 1., 0., 1., 0.]])</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Wins</th>
<th data-quarto-table-cell-role="th">Losses</th>
<th data-quarto-table-cell-role="th">Ratio</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Team</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>5.0</td>
<td>1.0</td>
<td>5.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>4.0</td>
<td>2.0</td>
<td>2.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>4.0</td>
<td>2.0</td>
<td>2.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>3.0</td>
<td>3.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>2.0</td>
<td>4.0</td>
<td>0.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>2.0</td>
<td>4.0</td>
<td>0.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>1.0</td>
<td>5.0</td>
<td>0.2</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="vertex-power" class="level2">
<h2 class="anchored" data-anchor-id="vertex-power">Vertex Power</h2>
<p>To rank the teams based on vertex power, I took the square of the adjacency matrix and added the adjacency matrix to get the vertex power matrix. The square of the matrix takes into account the wins of the team that the team beat, which thus takes into account the strength the opponent. The rankings are similar but this ranking broke ties that were seen in the win loss ranking.</p>
<div class="cell" data-execution_count="9">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># directed graph </span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> nx.DiGraph() </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>rows, columns <span class="op">=</span> M.shape</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(rows): </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(columns): </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>   <span class="cf">if</span> M[i][j] <span class="op">==</span> <span class="dv">1</span>: </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>      G.add_edge(i<span class="op">+</span><span class="dv">1</span>,j<span class="op">+</span><span class="dv">1</span>) </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>nx.draw(G, with_labels<span class="op">=</span><span class="va">True</span>, node_size <span class="op">=</span> <span class="dv">5000</span>, node_color <span class="op">=</span> <span class="st">'lightblue'</span>, font_size <span class="op">=</span> <span class="dv">20</span>, font_color <span class="op">=</span> <span class="st">'black'</span>)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>Msquared <span class="op">=</span> np.dot(M,M)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>vertex_power_matrix <span class="op">=</span> Msquared <span class="op">+</span> M</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>vertex_power <span class="op">=</span> np.<span class="bu">sum</span>(vertex_power_matrix, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'Team'</span>: team, <span class="st">'Vertex Power'</span>: vertex_power}).sort_values(by<span class="op">=</span><span class="st">'Vertex Power'</span>, ascending<span class="op">=</span><span class="va">False</span>).set_index(<span class="st">'Team'</span>)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="53">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Vertex Power</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Team</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>17.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>16.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>13.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>10.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>6.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>5.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>5.0</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-display">
<p><img src="project1_files/figure-html/cell-10-output-2.png" width="691" height="499"></p>
</div>
</div>
</section>
<section id="reverse-page-rank" class="level2">
<h2 class="anchored" data-anchor-id="reverse-page-rank">Reverse Page Rank</h2>
<p>Note that I used alpha = 0.85 and the teleportation vector is [1/7, 1/7, 1/7, 1/7, 1/7, 1/7, 1/7].</p>
<p>This ranking is done by taking the transpose of the matrix and applying the equation (I - aP)x = (1-a)v where P is the transition matrix, v is the teleportation vector, and a is the damping factor. The general intuition behind this method is that it tells us the amount of different teams that one specific team would lead to. Applied to this case, we’re ranking by the strength of each team.</p>
<p>The most notable change is that 5 first rather than 7 and this difference could be due to the teleportation vector. The intuition behind the teleportation vector in this scenario is that we’re making it equally likely that a team beats another team, thus reducing the impact of the other wins. Additionally, we can note that 5 did beat 7 which beat a lot of other teams and while this is taken into account in the vertex power ranking, it perhaps is emphasized more here.</p>
<div class="cell" data-execution_count="10">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reverse graph</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>M <span class="op">=</span> np.zeros((<span class="dv">7</span>,<span class="dv">7</span>))</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">0</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">2</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">1</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">3</span>,<span class="dv">4</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">5</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">1</span>,<span class="dv">5</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">6</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">5</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">4</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">5</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">5</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">0</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">5</span>,<span class="dv">2</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> M.transpose()</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>D <span class="op">=</span> np.identity(<span class="dv">7</span>)</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">7</span>):</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>    D[i,i] <span class="op">=</span> <span class="dv">1</span><span class="op">/</span>(np.<span class="bu">sum</span>(T[i],axis <span class="op">=</span> <span class="dv">0</span>))</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a><span class="co"># transition matrix</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>P <span class="op">=</span> np.dot(T.transpose(),D)</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a><span class="co"># teleportation vector</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>v <span class="op">=</span> np.array([<span class="dv">1</span><span class="op">/</span><span class="dv">7</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">7</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">7</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">7</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">7</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">7</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">7</span>])</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="fl">0.85</span></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>lhs <span class="op">=</span> (np.identity(<span class="dv">7</span>) <span class="op">-</span> a <span class="op">*</span> P)</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>rhs <span class="op">=</span> (<span class="dv">1</span><span class="op">-</span>a) <span class="op">*</span> v</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linalg.solve(lhs, rhs)</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'Team'</span>: team, <span class="st">'Reverse Page Rank'</span>: x}).sort_values(by<span class="op">=</span><span class="st">'Reverse Page Rank'</span>, ascending<span class="op">=</span><span class="va">False</span>).set_index(<span class="st">'Team'</span>)</span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="54">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Reverse Page Rank</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Team</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>0.244525</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>0.184189</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>0.176270</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>0.130332</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>0.125352</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>0.079666</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>0.059667</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="weighted-vertex-power" class="level2">
<h2 class="anchored" data-anchor-id="weighted-vertex-power">Weighted Vertex Power</h2>
<p>With the added weights to the adjacency matrix, the ranking becomes more accurate. Weights help take into consideration how convincingly the team won while punishing those that were a closer game. Rankings show again, and more convincingly, that 7 is at the top with 5 not too close behind but the rest of the teams are more spread out. This helps show that more nuance in the skill disparity between the teams.</p>
<p>Note I couldn’t figure out how to rename the nodes to 1-7 instead of 0-6.</p>
<div class="cell" data-execution_count="11">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># weighted adjacency matrix</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>M <span class="op">=</span> np.zeros((<span class="dv">7</span>,<span class="dv">7</span>))</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">0</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">2</span>] <span class="op">=</span> <span class="dv">8</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">1</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">7</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">3</span>,<span class="dv">4</span>] <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">7</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">7</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">5</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">23</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">1</span>,<span class="dv">5</span>] <span class="op">=</span> <span class="dv">18</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">13</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">14</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">6</span>] <span class="op">=</span> <span class="dv">7</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">5</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">13</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">4</span>] <span class="op">=</span> <span class="dv">7</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">5</span>] <span class="op">=</span> <span class="dv">18</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">45</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">5</span>] <span class="op">=</span> <span class="dv">19</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">0</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">14</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">5</span>,<span class="dv">2</span>] <span class="op">=</span> <span class="dv">13</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>display(M)</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> nx.from_numpy_array(np.matrix(M), create_using<span class="op">=</span>nx.DiGraph)</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>layout <span class="op">=</span> nx.spring_layout(G)</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>nx.draw(G, layout, with_labels<span class="op">=</span><span class="va">True</span>, node_size <span class="op">=</span> <span class="dv">1000</span>, node_color <span class="op">=</span> <span class="st">'lightblue'</span>, font_size <span class="op">=</span> <span class="dv">20</span>, font_color <span class="op">=</span> <span class="st">'black'</span>)</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> nx.get_edge_attributes(G, <span class="st">"weight"</span>)</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>nx.draw_networkx_edge_labels(G, pos<span class="op">=</span>layout, edge_labels<span class="op">=</span>labels)</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>Msquared <span class="op">=</span> np.dot(M,M)</span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>vertex_power_matrix <span class="op">=</span> Msquared <span class="op">+</span> M</span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>vertex_power <span class="op">=</span> np.<span class="bu">sum</span>(vertex_power_matrix, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'Team'</span>: team, <span class="st">'Vertex Power'</span>: vertex_power}).sort_values(by<span class="op">=</span><span class="st">'Vertex Power'</span>, ascending<span class="op">=</span><span class="va">False</span>).set_index(<span class="st">'Team'</span>)</span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>array([[ 0.,  4.,  0., 14.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  7.,  0., 18.,  0.],
       [15.,  7.,  0., 13.,  7.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  3.,  0.,  0.],
       [ 7., 10.,  0.,  0.,  0., 18.,  7.],
       [23.,  0., 13., 13.,  0.,  0.,  0.],
       [45.,  6.,  8., 14.,  0., 19.,  0.]])</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="project1_files/figure-html/cell-12-output-2.png" width="691" height="499"></p>
</div>
<div class="cell-output cell-output-display" data-execution_count="55">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Vertex Power</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Team</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>2361.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>1944.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>1048.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>928.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>820.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>160.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>129.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<!-- -->

</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb11" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Project 1"</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Vincent"</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "4/14/2024"</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> html_document</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="an">latex-auto-mk:</span><span class="co"> true</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: show</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: </span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co">      source: true</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co">      toggle: true</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sympy <span class="im">as</span> sp</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.animation <span class="im">import</span> PillowWriter</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> networkx <span class="im">as</span> nx</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a><span class="fu"># Markov Chains</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introduction</span></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>Here is the system of equations that represents the scenario.</span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a><span class="al">![Systems of equations](systemofequations.jpeg)</span>{width="50%"}</span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>Here is the transition matrix. The market shares after 3 years are shown below given that the initial market shares are equal, which meant that the initial vector is <span class="sc">\[</span>1/3, 1/3, 1/3<span class="sc">\]</span>.</span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a><span class="co"># transition matrix</span></span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> sp.Matrix([[<span class="fl">0.5</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>], [<span class="fl">0.2</span>, <span class="fl">0.6</span>, <span class="fl">0.1</span>], [<span class="fl">0.3</span>, <span class="fl">0.2</span>, <span class="fl">0.6</span>]])</span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a>display(A)</span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a><span class="co"># intial vector</span></span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a>x1, x2, x3 <span class="op">=</span> sp.symbols(<span class="st">'x1 x2 x3'</span>)</span>
<span id="cb11-48"><a href="#cb11-48" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> sp.Matrix([x1, x2, x3])</span>
<span id="cb11-49"><a href="#cb11-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-50"><a href="#cb11-50" aria-hidden="true" tabindex="-1"></a><span class="co"># 3 steps, equal shares</span></span>
<span id="cb11-51"><a href="#cb11-51" aria-hidden="true" tabindex="-1"></a>xtest <span class="op">=</span> x.subs({x1: <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>, x2: <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>, x3: <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>})</span>
<span id="cb11-52"><a href="#cb11-52" aria-hidden="true" tabindex="-1"></a>A3 <span class="op">=</span> (A<span class="op">**</span><span class="dv">3</span>)<span class="op">*</span>xtest</span>
<span id="cb11-53"><a href="#cb11-53" aria-hidden="true" tabindex="-1"></a>display(A3)</span>
<span id="cb11-54"><a href="#cb11-54" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb11-55"><a href="#cb11-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-56"><a href="#cb11-56" aria-hidden="true" tabindex="-1"></a><span class="fu">## Recommendation</span></span>
<span id="cb11-57"><a href="#cb11-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-58"><a href="#cb11-58" aria-hidden="true" tabindex="-1"></a>As seen in the below graphs, the effect of launching campaign 2 is better than campaign 1. Note that campaign 0 shows what would happen if no campiagn is launched. In that scenario, company C would have the highest market share whereas we would be stuck in the middle. Launching campaign 1 would not change this situation but we would be closer to C. However, launching campaign 2 would allow us to surpass C and have the highest market share, bringing us to 0.4. asdff</span>
<span id="cb11-59"><a href="#cb11-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-62"><a href="#cb11-62" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb11-63"><a href="#cb11-63" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb11-64"><a href="#cb11-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-65"><a href="#cb11-65" aria-hidden="true" tabindex="-1"></a><span class="co"># first campaign will convince 20% of the B customers who would otherwise stay with B</span></span>
<span id="cb11-66"><a href="#cb11-66" aria-hidden="true" tabindex="-1"></a><span class="co"># in a given year to switch to A</span></span>
<span id="cb11-67"><a href="#cb11-67" aria-hidden="true" tabindex="-1"></a>event1 <span class="op">=</span> <span class="fl">0.6</span><span class="op">*</span><span class="fl">0.2</span></span>
<span id="cb11-68"><a href="#cb11-68" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> sp.Matrix([[<span class="fl">0.5</span>, <span class="fl">0.2</span> <span class="op">+</span> event1 , <span class="fl">0.3</span>], [<span class="fl">0.2</span>, <span class="fl">0.6</span> <span class="op">-</span> event1, <span class="fl">0.1</span>], [<span class="fl">0.3</span>, <span class="fl">0.2</span>, <span class="fl">0.6</span>]])</span>
<span id="cb11-69"><a href="#cb11-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-70"><a href="#cb11-70" aria-hidden="true" tabindex="-1"></a><span class="co">#  second advertising campaign would convince 20% </span></span>
<span id="cb11-71"><a href="#cb11-71" aria-hidden="true" tabindex="-1"></a><span class="co">#  of the customers who would otherwise stay with C in a given year to switch to A</span></span>
<span id="cb11-72"><a href="#cb11-72" aria-hidden="true" tabindex="-1"></a>event2 <span class="op">=</span> <span class="fl">0.6</span><span class="op">*</span><span class="fl">0.2</span></span>
<span id="cb11-73"><a href="#cb11-73" aria-hidden="true" tabindex="-1"></a>C <span class="op">=</span> sp.Matrix([[<span class="fl">0.5</span>, <span class="fl">0.2</span> , <span class="fl">0.3</span> <span class="op">+</span> event2 ], [<span class="fl">0.2</span>, <span class="fl">0.6</span>, <span class="fl">0.1</span>], [<span class="fl">0.3</span>, <span class="fl">0.2</span>, <span class="fl">0.6</span> <span class="op">-</span> event2]])</span>
<span id="cb11-74"><a href="#cb11-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-75"><a href="#cb11-75" aria-hidden="true" tabindex="-1"></a><span class="co"># plotting</span></span>
<span id="cb11-76"><a href="#cb11-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-77"><a href="#cb11-77" aria-hidden="true" tabindex="-1"></a>steps <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">1</span>)</span>
<span id="cb11-78"><a href="#cb11-78" aria-hidden="true" tabindex="-1"></a>campaigns <span class="op">=</span> [A, B, C]</span>
<span id="cb11-79"><a href="#cb11-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-80"><a href="#cb11-80" aria-hidden="true" tabindex="-1"></a>xtest1 <span class="op">=</span> x.subs({x1: <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>, x2: <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>, x3: <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>})</span>
<span id="cb11-81"><a href="#cb11-81" aria-hidden="true" tabindex="-1"></a>xtest2 <span class="op">=</span> x.subs({x1: <span class="dv">0</span>, x2: <span class="dv">1</span>, x3: <span class="dv">0</span>})</span>
<span id="cb11-82"><a href="#cb11-82" aria-hidden="true" tabindex="-1"></a>xtest3 <span class="op">=</span> x.subs({x1: <span class="dv">0</span>, x2: <span class="dv">0</span>, x3: <span class="dv">1</span>})</span>
<span id="cb11-83"><a href="#cb11-83" aria-hidden="true" tabindex="-1"></a>xtestlist <span class="op">=</span> [xtest1]</span>
<span id="cb11-84"><a href="#cb11-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-85"><a href="#cb11-85" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> campaign <span class="kw">in</span> campaigns:</span>
<span id="cb11-86"><a href="#cb11-86" aria-hidden="true" tabindex="-1"></a>    plt.figure()</span>
<span id="cb11-87"><a href="#cb11-87" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="st">"Campaign"</span> <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> <span class="bu">str</span>(campaigns.index(campaign)))</span>
<span id="cb11-88"><a href="#cb11-88" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> xtest <span class="kw">in</span> xtestlist:</span>
<span id="cb11-89"><a href="#cb11-89" aria-hidden="true" tabindex="-1"></a>        lst <span class="op">=</span> []</span>
<span id="cb11-90"><a href="#cb11-90" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> steps:</span>
<span id="cb11-91"><a href="#cb11-91" aria-hidden="true" tabindex="-1"></a>            l <span class="op">=</span> [i]</span>
<span id="cb11-92"><a href="#cb11-92" aria-hidden="true" tabindex="-1"></a>            xstep <span class="op">=</span> (campaign<span class="op">**</span>i)<span class="op">*</span>xtest</span>
<span id="cb11-93"><a href="#cb11-93" aria-hidden="true" tabindex="-1"></a>            l.extend(xstep)</span>
<span id="cb11-94"><a href="#cb11-94" aria-hidden="true" tabindex="-1"></a>            lst.append(l)</span>
<span id="cb11-95"><a href="#cb11-95" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> pd.DataFrame(lst, columns<span class="op">=</span>[<span class="st">'Step'</span>, <span class="st">'A'</span>, <span class="st">'B'</span>, <span class="st">'C'</span>])</span>
<span id="cb11-96"><a href="#cb11-96" aria-hidden="true" tabindex="-1"></a>        plt.plot(df[<span class="st">'Step'</span>], df[<span class="st">'A'</span>], <span class="st">"o-"</span>, label<span class="op">=</span><span class="st">'A'</span>)</span>
<span id="cb11-97"><a href="#cb11-97" aria-hidden="true" tabindex="-1"></a>        plt.plot(df[<span class="st">'Step'</span>], df[<span class="st">'B'</span>], <span class="st">"o-"</span>, label<span class="op">=</span><span class="st">'B'</span>)</span>
<span id="cb11-98"><a href="#cb11-98" aria-hidden="true" tabindex="-1"></a>        plt.plot(df[<span class="st">'Step'</span>], df[<span class="st">'C'</span>], <span class="st">"o-"</span>, label<span class="op">=</span><span class="st">'C'</span>)</span>
<span id="cb11-99"><a href="#cb11-99" aria-hidden="true" tabindex="-1"></a>        plt.xlabel(<span class="st">'Step'</span>)</span>
<span id="cb11-100"><a href="#cb11-100" aria-hidden="true" tabindex="-1"></a>        plt.ylabel(<span class="st">'Porportion of Customers'</span>)</span>
<span id="cb11-101"><a href="#cb11-101" aria-hidden="true" tabindex="-1"></a>        plt.legend()</span>
<span id="cb11-102"><a href="#cb11-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-103"><a href="#cb11-103" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb11-104"><a href="#cb11-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-105"><a href="#cb11-105" aria-hidden="true" tabindex="-1"></a>You might have noticed that we're assuming that the market shares are equal at the beginning. However, the transition matrix is a stable discrete dynamical system which would have the same equilibrium state regardless of the initial vector. To identify a stable system, we need the dominant eigenvalue to be equal to 1 which is the case here. An example is seen below where the initial market shares are <span class="sc">\[</span>0, 0, 1<span class="sc">\]</span>.</span>
<span id="cb11-106"><a href="#cb11-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-109"><a href="#cb11-109" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb11-110"><a href="#cb11-110" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb11-111"><a href="#cb11-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-112"><a href="#cb11-112" aria-hidden="true" tabindex="-1"></a>A.eigenvals()</span>
<span id="cb11-113"><a href="#cb11-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-114"><a href="#cb11-114" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb11-115"><a href="#cb11-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-118"><a href="#cb11-118" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb11-119"><a href="#cb11-119" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb11-120"><a href="#cb11-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-121"><a href="#cb11-121" aria-hidden="true" tabindex="-1"></a><span class="co"># %%</span></span>
<span id="cb11-122"><a href="#cb11-122" aria-hidden="true" tabindex="-1"></a><span class="co"># plotting</span></span>
<span id="cb11-123"><a href="#cb11-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-124"><a href="#cb11-124" aria-hidden="true" tabindex="-1"></a>steps <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">1</span>)</span>
<span id="cb11-125"><a href="#cb11-125" aria-hidden="true" tabindex="-1"></a>campaigns <span class="op">=</span> [A, B, C]</span>
<span id="cb11-126"><a href="#cb11-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-127"><a href="#cb11-127" aria-hidden="true" tabindex="-1"></a>xtest1 <span class="op">=</span> x.subs({x1: <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>, x2: <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>, x3: <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>})</span>
<span id="cb11-128"><a href="#cb11-128" aria-hidden="true" tabindex="-1"></a>xtest2 <span class="op">=</span> x.subs({x1: <span class="dv">0</span>, x2: <span class="dv">1</span>, x3: <span class="dv">0</span>})</span>
<span id="cb11-129"><a href="#cb11-129" aria-hidden="true" tabindex="-1"></a>xtest3 <span class="op">=</span> x.subs({x1: <span class="dv">0</span>, x2: <span class="dv">0</span>, x3: <span class="dv">1</span>})</span>
<span id="cb11-130"><a href="#cb11-130" aria-hidden="true" tabindex="-1"></a>xtestlist <span class="op">=</span> [xtest3]</span>
<span id="cb11-131"><a href="#cb11-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-132"><a href="#cb11-132" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> campaign <span class="kw">in</span> campaigns:</span>
<span id="cb11-133"><a href="#cb11-133" aria-hidden="true" tabindex="-1"></a>    plt.figure()</span>
<span id="cb11-134"><a href="#cb11-134" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="st">"Campaign"</span> <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> <span class="bu">str</span>(campaigns.index(campaign)))</span>
<span id="cb11-135"><a href="#cb11-135" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> xtest <span class="kw">in</span> xtestlist:</span>
<span id="cb11-136"><a href="#cb11-136" aria-hidden="true" tabindex="-1"></a>        lst <span class="op">=</span> []</span>
<span id="cb11-137"><a href="#cb11-137" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> steps:</span>
<span id="cb11-138"><a href="#cb11-138" aria-hidden="true" tabindex="-1"></a>            l <span class="op">=</span> [i]</span>
<span id="cb11-139"><a href="#cb11-139" aria-hidden="true" tabindex="-1"></a>            xstep <span class="op">=</span> (campaign<span class="op">**</span>i)<span class="op">*</span>xtest</span>
<span id="cb11-140"><a href="#cb11-140" aria-hidden="true" tabindex="-1"></a>            l.extend(xstep)</span>
<span id="cb11-141"><a href="#cb11-141" aria-hidden="true" tabindex="-1"></a>            lst.append(l)</span>
<span id="cb11-142"><a href="#cb11-142" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> pd.DataFrame(lst, columns<span class="op">=</span>[<span class="st">'Step'</span>, <span class="st">'A'</span>, <span class="st">'B'</span>, <span class="st">'C'</span>])</span>
<span id="cb11-143"><a href="#cb11-143" aria-hidden="true" tabindex="-1"></a>        plt.plot(df[<span class="st">'Step'</span>], df[<span class="st">'A'</span>], <span class="st">"o-"</span>, label<span class="op">=</span><span class="st">'A'</span>)</span>
<span id="cb11-144"><a href="#cb11-144" aria-hidden="true" tabindex="-1"></a>        plt.plot(df[<span class="st">'Step'</span>], df[<span class="st">'B'</span>], <span class="st">"o-"</span>, label<span class="op">=</span><span class="st">'B'</span>)</span>
<span id="cb11-145"><a href="#cb11-145" aria-hidden="true" tabindex="-1"></a>        plt.plot(df[<span class="st">'Step'</span>], df[<span class="st">'C'</span>], <span class="st">"o-"</span>, label<span class="op">=</span><span class="st">'C'</span>)</span>
<span id="cb11-146"><a href="#cb11-146" aria-hidden="true" tabindex="-1"></a>        plt.xlabel(<span class="st">'Step'</span>)</span>
<span id="cb11-147"><a href="#cb11-147" aria-hidden="true" tabindex="-1"></a>        plt.ylabel(<span class="st">'Porportion of Customers'</span>)</span>
<span id="cb11-148"><a href="#cb11-148" aria-hidden="true" tabindex="-1"></a>        plt.legend()</span>
<span id="cb11-149"><a href="#cb11-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-150"><a href="#cb11-150" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb11-151"><a href="#cb11-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-152"><a href="#cb11-152" aria-hidden="true" tabindex="-1"></a>Further analysis shows that there is a diminishing marginal return if more money is spent on a campaign to take more customers away from B or C. The is shown as the curves are concave down. Additionally, these graphs also show that spending money on taking C's customers is more valuable than taking B's because A increases around 0.15 for the former and 0.1 for the latter. Taking C's customers also makes A the market leader by a significant margin. It should be noted that this also assumes the amount of money it takes to take B's customers is the same as taking C's customers.</span>
<span id="cb11-153"><a href="#cb11-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-154"><a href="#cb11-154" aria-hidden="true" tabindex="-1"></a>Additionally, although the initial market share doesn't matter, it is important to note that we're assuming these events are independent of each other. For example, perhaps customers are more likely to follow the pack if a majority of the population are using companies which means that the market would be more volatile than my simulations suggest. This would also mean that it's more important for us to have the highest market share at the beginning, making initial market shares more important.</span>
<span id="cb11-155"><a href="#cb11-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-156"><a href="#cb11-156" aria-hidden="true" tabindex="-1"></a><span class="fu"># Gas in a Tube</span></span>
<span id="cb11-157"><a href="#cb11-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-158"><a href="#cb11-158" aria-hidden="true" tabindex="-1"></a>The time dependent reaction diffusion equation is shown below and I translated it to matrix form.</span>
<span id="cb11-159"><a href="#cb11-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-160"><a href="#cb11-160" aria-hidden="true" tabindex="-1"></a><span class="al">![Equation](reactiondiffusionequation.png)</span>{width="50%"}</span>
<span id="cb11-161"><a href="#cb11-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-162"><a href="#cb11-162" aria-hidden="true" tabindex="-1"></a><span class="al">![Matrix Form](reactiondiffusionmatrix.jpeg)</span>{width="50%"}</span>
<span id="cb11-163"><a href="#cb11-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-164"><a href="#cb11-164" aria-hidden="true" tabindex="-1"></a>Note that because there is no continous source of gas, the *kf* is 0.</span>
<span id="cb11-165"><a href="#cb11-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-166"><a href="#cb11-166" aria-hidden="true" tabindex="-1"></a>After this, we can factor the *y* vector at time *t* out (by multiplying the lone *y* vector by the identity matrix). This gives us a way to walk forward to the densities at time *t+1* from the densities at time *t*. To go backwards, we can take the inverse on both sides.</span>
<span id="cb11-167"><a href="#cb11-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-168"><a href="#cb11-168" aria-hidden="true" tabindex="-1"></a>This allows us to estimate the value of D, the diffusion constant by walking backwards from the given densities at t = 270 to try to match the given densities at t = 240. I got a value of D = 0.00004.</span>
<span id="cb11-169"><a href="#cb11-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-170"><a href="#cb11-170" aria-hidden="true" tabindex="-1"></a>From there, we can continue going backwards to t = 0, giving us an initial concentration of ​0, 0.0149, 1.01, 6.36, 1.01, 0.0149,0 at each node.</span>
<span id="cb11-171"><a href="#cb11-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-172"><a href="#cb11-172" aria-hidden="true" tabindex="-1"></a>Then, we can go forwards to t = 210 and t = 310 by using the previous equation get the concentrations at those times.</span>
<span id="cb11-173"><a href="#cb11-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-174"><a href="#cb11-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-177"><a href="#cb11-177" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb11-178"><a href="#cb11-178" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb11-179"><a href="#cb11-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-180"><a href="#cb11-180" aria-hidden="true" tabindex="-1"></a><span class="co"># constants and initial conditions</span></span>
<span id="cb11-181"><a href="#cb11-181" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">7</span> <span class="co"># number of nodes</span></span>
<span id="cb11-182"><a href="#cb11-182" aria-hidden="true" tabindex="-1"></a>hsquared <span class="op">=</span> (<span class="dv">1</span><span class="op">/</span><span class="dv">6</span>)<span class="op">**</span><span class="dv">2</span> <span class="co"># distance between nodes</span></span>
<span id="cb11-183"><a href="#cb11-183" aria-hidden="true" tabindex="-1"></a>k <span class="op">=</span> <span class="dv">1</span> <span class="co"># time step</span></span>
<span id="cb11-184"><a href="#cb11-184" aria-hidden="true" tabindex="-1"></a>D <span class="op">=</span> <span class="fl">0.00004</span></span>
<span id="cb11-185"><a href="#cb11-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-186"><a href="#cb11-186" aria-hidden="true" tabindex="-1"></a>given1 <span class="op">=</span> [<span class="dv">0</span>, <span class="fl">0.032</span>, <span class="fl">1.23</span>, <span class="fl">3.69</span>, <span class="fl">1.23</span>, <span class="fl">0.032</span>, <span class="dv">0</span>]</span>
<span id="cb11-187"><a href="#cb11-187" aria-hidden="true" tabindex="-1"></a>given2 <span class="op">=</span> [<span class="dv">0</span>, <span class="fl">0.051</span>, <span class="fl">1.21</span>, <span class="fl">3.48</span>, <span class="fl">1.21</span>, <span class="fl">0.051</span>, <span class="dv">0</span>]</span>
<span id="cb11-188"><a href="#cb11-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-189"><a href="#cb11-189" aria-hidden="true" tabindex="-1"></a><span class="co"># matrix M</span></span>
<span id="cb11-190"><a href="#cb11-190" aria-hidden="true" tabindex="-1"></a>M <span class="op">=</span> sp.zeros(N)</span>
<span id="cb11-191"><a href="#cb11-191" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb11-192"><a href="#cb11-192" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (i<span class="op">&gt;</span><span class="dv">0</span>):</span>
<span id="cb11-193"><a href="#cb11-193" aria-hidden="true" tabindex="-1"></a>        M[i<span class="op">-</span><span class="dv">1</span>,i] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-194"><a href="#cb11-194" aria-hidden="true" tabindex="-1"></a>    M[i,i] <span class="op">=</span> <span class="op">-</span><span class="dv">2</span></span>
<span id="cb11-195"><a href="#cb11-195" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (i<span class="op">&lt;</span>N<span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb11-196"><a href="#cb11-196" aria-hidden="true" tabindex="-1"></a>      M[i<span class="op">+</span><span class="dv">1</span>,i] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-197"><a href="#cb11-197" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-198"><a href="#cb11-198" aria-hidden="true" tabindex="-1"></a><span class="co"># moving from t270 to t240</span></span>
<span id="cb11-199"><a href="#cb11-199" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> <span class="dv">270</span></span>
<span id="cb11-200"><a href="#cb11-200" aria-hidden="true" tabindex="-1"></a>t240 <span class="op">=</span> sp.Matrix(given1)</span>
<span id="cb11-201"><a href="#cb11-201" aria-hidden="true" tabindex="-1"></a>t270 <span class="op">=</span> sp.Matrix(given2)</span>
<span id="cb11-202"><a href="#cb11-202" aria-hidden="true" tabindex="-1"></a>current <span class="op">=</span> t270</span>
<span id="cb11-203"><a href="#cb11-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-204"><a href="#cb11-204" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> sp.eye(N) <span class="op">+</span> (D<span class="op">*</span>k<span class="op">/</span>(hsquared))<span class="op">*</span>M</span>
<span id="cb11-205"><a href="#cb11-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-206"><a href="#cb11-206" aria-hidden="true" tabindex="-1"></a>Ainv<span class="op">=</span> A.inv()</span>
<span id="cb11-207"><a href="#cb11-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-208"><a href="#cb11-208" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> t <span class="op">&gt;</span> <span class="dv">240</span>:</span>
<span id="cb11-209"><a href="#cb11-209" aria-hidden="true" tabindex="-1"></a>    current <span class="op">=</span> sp.nsimplify((Ainv)<span class="op">*</span>current, tolerance<span class="op">=</span><span class="fl">0.01</span>,rational<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb11-210"><a href="#cb11-210" aria-hidden="true" tabindex="-1"></a>    t <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb11-211"><a href="#cb11-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-212"><a href="#cb11-212" aria-hidden="true" tabindex="-1"></a>display(<span class="st">"t = 240"</span>, current.evalf(<span class="dv">3</span>))</span>
<span id="cb11-213"><a href="#cb11-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-214"><a href="#cb11-214" aria-hidden="true" tabindex="-1"></a><span class="co"># moving from t240 to t0</span></span>
<span id="cb11-215"><a href="#cb11-215" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> t <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb11-216"><a href="#cb11-216" aria-hidden="true" tabindex="-1"></a>    current <span class="op">=</span> sp.nsimplify((Ainv)<span class="op">*</span>current, tolerance<span class="op">=</span><span class="fl">0.015</span>,rational<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb11-217"><a href="#cb11-217" aria-hidden="true" tabindex="-1"></a>    t <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb11-218"><a href="#cb11-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-219"><a href="#cb11-219" aria-hidden="true" tabindex="-1"></a>display(<span class="st">"t = 0"</span>, current.evalf(<span class="dv">3</span>))</span>
<span id="cb11-220"><a href="#cb11-220" aria-hidden="true" tabindex="-1"></a>initial <span class="op">=</span> current</span>
<span id="cb11-221"><a href="#cb11-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-222"><a href="#cb11-222" aria-hidden="true" tabindex="-1"></a><span class="co"># moving from t0 to t210</span></span>
<span id="cb11-223"><a href="#cb11-223" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> t <span class="op">&lt;</span> <span class="dv">210</span>:</span>
<span id="cb11-224"><a href="#cb11-224" aria-hidden="true" tabindex="-1"></a>    current <span class="op">=</span> A<span class="op">*</span>current</span>
<span id="cb11-225"><a href="#cb11-225" aria-hidden="true" tabindex="-1"></a>    t <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb11-226"><a href="#cb11-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-227"><a href="#cb11-227" aria-hidden="true" tabindex="-1"></a>display(<span class="st">"t = 210"</span>, current.evalf(<span class="dv">3</span>))</span>
<span id="cb11-228"><a href="#cb11-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-229"><a href="#cb11-229" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> t <span class="op">&lt;</span> <span class="dv">310</span>:</span>
<span id="cb11-230"><a href="#cb11-230" aria-hidden="true" tabindex="-1"></a>    current <span class="op">=</span> A<span class="op">*</span>current</span>
<span id="cb11-231"><a href="#cb11-231" aria-hidden="true" tabindex="-1"></a>    t <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb11-232"><a href="#cb11-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-233"><a href="#cb11-233" aria-hidden="true" tabindex="-1"></a>display(<span class="st">"t = 310"</span>, current.evalf(<span class="dv">3</span>))</span>
<span id="cb11-234"><a href="#cb11-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-235"><a href="#cb11-235" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb11-236"><a href="#cb11-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-237"><a href="#cb11-237" aria-hidden="true" tabindex="-1"></a>I've also included an animation of the gas concentrations from the initial state to t = 310. One can see how the points I calculated comes close the points given. A solution that allows negative values would come closer to the given values but here, I've coverted decimals to fractions with a tolerance of 0.01.</span>
<span id="cb11-238"><a href="#cb11-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-241"><a href="#cb11-241" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb11-242"><a href="#cb11-242" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb11-243"><a href="#cb11-243" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb11-244"><a href="#cb11-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-245"><a href="#cb11-245" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb11-246"><a href="#cb11-246" aria-hidden="true" tabindex="-1"></a>l, <span class="op">=</span> plt.plot([],[], <span class="st">'k-'</span>)</span>
<span id="cb11-247"><a href="#cb11-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-248"><a href="#cb11-248" aria-hidden="true" tabindex="-1"></a>meter <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="dv">7</span>, <span class="dv">1</span>)<span class="op">/</span><span class="dv">6</span></span>
<span id="cb11-249"><a href="#cb11-249" aria-hidden="true" tabindex="-1"></a>meter</span>
<span id="cb11-250"><a href="#cb11-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-251"><a href="#cb11-251" aria-hidden="true" tabindex="-1"></a>plt.plot(meter, given1, label<span class="op">=</span><span class="st">'Given t = 240'</span>)</span>
<span id="cb11-252"><a href="#cb11-252" aria-hidden="true" tabindex="-1"></a>plt.plot(meter, given2, label<span class="op">=</span><span class="st">'Given t = 270'</span>)</span>
<span id="cb11-253"><a href="#cb11-253" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb11-254"><a href="#cb11-254" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Meter'</span>)</span>
<span id="cb11-255"><a href="#cb11-255" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Concentration'</span>)</span>
<span id="cb11-256"><a href="#cb11-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-257"><a href="#cb11-257" aria-hidden="true" tabindex="-1"></a>plt.xlim(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb11-258"><a href="#cb11-258" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">8</span>)</span>
<span id="cb11-259"><a href="#cb11-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-260"><a href="#cb11-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-261"><a href="#cb11-261" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> func(x):</span>
<span id="cb11-262"><a href="#cb11-262" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (A)<span class="op">*</span>x</span>
<span id="cb11-263"><a href="#cb11-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-264"><a href="#cb11-264" aria-hidden="true" tabindex="-1"></a>writer <span class="op">=</span> PillowWriter(fps<span class="op">=</span><span class="dv">20</span>, metadata<span class="op">=</span><span class="bu">dict</span>(title<span class="op">=</span><span class="st">'Movie'</span>, artist <span class="op">=</span> <span class="st">"me"</span>))</span>
<span id="cb11-265"><a href="#cb11-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-266"><a href="#cb11-266" aria-hidden="true" tabindex="-1"></a>current <span class="op">=</span> initial</span>
<span id="cb11-267"><a href="#cb11-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-268"><a href="#cb11-268" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> writer.saving(fig, <span class="st">"gas.gif"</span>,<span class="dv">100</span>):</span>
<span id="cb11-269"><a href="#cb11-269" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> np.linspace(<span class="dv">0</span>,<span class="dv">310</span>,<span class="dv">311</span>):</span>
<span id="cb11-270"><a href="#cb11-270" aria-hidden="true" tabindex="-1"></a>        xval <span class="op">=</span> meter</span>
<span id="cb11-271"><a href="#cb11-271" aria-hidden="true" tabindex="-1"></a>        yval <span class="op">=</span> func(current)</span>
<span id="cb11-272"><a href="#cb11-272" aria-hidden="true" tabindex="-1"></a>        current <span class="op">=</span> yval</span>
<span id="cb11-273"><a href="#cb11-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-274"><a href="#cb11-274" aria-hidden="true" tabindex="-1"></a>        l.set_data(xval, yval)</span>
<span id="cb11-275"><a href="#cb11-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-276"><a href="#cb11-276" aria-hidden="true" tabindex="-1"></a>        writer.grab_frame()</span>
<span id="cb11-277"><a href="#cb11-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-278"><a href="#cb11-278" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb11-279"><a href="#cb11-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-280"><a href="#cb11-280" aria-hidden="true" tabindex="-1"></a><span class="al">![Diffusion Over Time](gas.gif)</span></span>
<span id="cb11-281"><a href="#cb11-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-282"><a href="#cb11-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-283"><a href="#cb11-283" aria-hidden="true" tabindex="-1"></a><span class="fu"># Sports Ranking</span></span>
<span id="cb11-284"><a href="#cb11-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-285"><a href="#cb11-285" aria-hidden="true" tabindex="-1"></a><span class="fu">## Win Loss Ratio</span></span>
<span id="cb11-286"><a href="#cb11-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-287"><a href="#cb11-287" aria-hidden="true" tabindex="-1"></a>When first ranking the teams based on win loss ratio, we see that team 7 is the best team with a ratio of 5 and Team 4 is the worst team with a ratio of 0.2. This is done by summing the *i*th row to get the number of wins and the *i*th column to get the number of losses and then dividing to get the win loss ratio of the *i*th team.</span>
<span id="cb11-288"><a href="#cb11-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-291"><a href="#cb11-291" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb11-292"><a href="#cb11-292" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb11-293"><a href="#cb11-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-294"><a href="#cb11-294" aria-hidden="true" tabindex="-1"></a><span class="co">#adjacency matrix</span></span>
<span id="cb11-295"><a href="#cb11-295" aria-hidden="true" tabindex="-1"></a>M <span class="op">=</span> np.zeros((<span class="dv">7</span>,<span class="dv">7</span>))</span>
<span id="cb11-296"><a href="#cb11-296" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">0</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-297"><a href="#cb11-297" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">2</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-298"><a href="#cb11-298" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">1</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-299"><a href="#cb11-299" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">3</span>,<span class="dv">4</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-300"><a href="#cb11-300" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-301"><a href="#cb11-301" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-302"><a href="#cb11-302" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">5</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-303"><a href="#cb11-303" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-304"><a href="#cb11-304" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-305"><a href="#cb11-305" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">1</span>,<span class="dv">5</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-306"><a href="#cb11-306" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-307"><a href="#cb11-307" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-308"><a href="#cb11-308" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">6</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-309"><a href="#cb11-309" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">5</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-310"><a href="#cb11-310" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">4</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-311"><a href="#cb11-311" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">5</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-312"><a href="#cb11-312" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-313"><a href="#cb11-313" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-314"><a href="#cb11-314" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">5</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-315"><a href="#cb11-315" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">0</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-316"><a href="#cb11-316" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">5</span>,<span class="dv">2</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-317"><a href="#cb11-317" aria-hidden="true" tabindex="-1"></a>display(M)</span>
<span id="cb11-318"><a href="#cb11-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-319"><a href="#cb11-319" aria-hidden="true" tabindex="-1"></a><span class="co"># win loss</span></span>
<span id="cb11-320"><a href="#cb11-320" aria-hidden="true" tabindex="-1"></a>team <span class="op">=</span> np.arange(<span class="dv">1</span>,<span class="dv">8</span>)</span>
<span id="cb11-321"><a href="#cb11-321" aria-hidden="true" tabindex="-1"></a>wins <span class="op">=</span> np.<span class="bu">sum</span>(M, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb11-322"><a href="#cb11-322" aria-hidden="true" tabindex="-1"></a>losses <span class="op">=</span> np.<span class="bu">sum</span>(M, axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb11-323"><a href="#cb11-323" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'Team'</span>: team, <span class="st">'Wins'</span>: wins, <span class="st">'Losses'</span>: losses, <span class="st">'Ratio'</span>: wins<span class="op">/</span>losses}).sort_values(by<span class="op">=</span><span class="st">'Ratio'</span>, ascending<span class="op">=</span><span class="va">False</span>).set_index(<span class="st">'Team'</span>)</span>
<span id="cb11-324"><a href="#cb11-324" aria-hidden="true" tabindex="-1"></a>display(df)</span>
<span id="cb11-325"><a href="#cb11-325" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb11-326"><a href="#cb11-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-327"><a href="#cb11-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-328"><a href="#cb11-328" aria-hidden="true" tabindex="-1"></a><span class="fu">## Vertex Power</span></span>
<span id="cb11-329"><a href="#cb11-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-330"><a href="#cb11-330" aria-hidden="true" tabindex="-1"></a>To rank the teams based on vertex power, I took the square of the adjacency matrix and added the adjacency matrix to get the vertex power matrix. The square of the matrix takes into account the wins of the team that the team beat, which thus takes into account the strength the opponent. The rankings are similar but this ranking broke ties that were seen in the win loss ranking.</span>
<span id="cb11-331"><a href="#cb11-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-334"><a href="#cb11-334" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb11-335"><a href="#cb11-335" aria-hidden="true" tabindex="-1"></a><span class="co"># directed graph </span></span>
<span id="cb11-336"><a href="#cb11-336" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> nx.DiGraph() </span>
<span id="cb11-337"><a href="#cb11-337" aria-hidden="true" tabindex="-1"></a>rows, columns <span class="op">=</span> M.shape</span>
<span id="cb11-338"><a href="#cb11-338" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(rows): </span>
<span id="cb11-339"><a href="#cb11-339" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(columns): </span>
<span id="cb11-340"><a href="#cb11-340" aria-hidden="true" tabindex="-1"></a>   <span class="cf">if</span> M[i][j] <span class="op">==</span> <span class="dv">1</span>: </span>
<span id="cb11-341"><a href="#cb11-341" aria-hidden="true" tabindex="-1"></a>      G.add_edge(i<span class="op">+</span><span class="dv">1</span>,j<span class="op">+</span><span class="dv">1</span>) </span>
<span id="cb11-342"><a href="#cb11-342" aria-hidden="true" tabindex="-1"></a>nx.draw(G, with_labels<span class="op">=</span><span class="va">True</span>, node_size <span class="op">=</span> <span class="dv">5000</span>, node_color <span class="op">=</span> <span class="st">'lightblue'</span>, font_size <span class="op">=</span> <span class="dv">20</span>, font_color <span class="op">=</span> <span class="st">'black'</span>)</span>
<span id="cb11-343"><a href="#cb11-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-344"><a href="#cb11-344" aria-hidden="true" tabindex="-1"></a>Msquared <span class="op">=</span> np.dot(M,M)</span>
<span id="cb11-345"><a href="#cb11-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-346"><a href="#cb11-346" aria-hidden="true" tabindex="-1"></a>vertex_power_matrix <span class="op">=</span> Msquared <span class="op">+</span> M</span>
<span id="cb11-347"><a href="#cb11-347" aria-hidden="true" tabindex="-1"></a>vertex_power <span class="op">=</span> np.<span class="bu">sum</span>(vertex_power_matrix, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb11-348"><a href="#cb11-348" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'Team'</span>: team, <span class="st">'Vertex Power'</span>: vertex_power}).sort_values(by<span class="op">=</span><span class="st">'Vertex Power'</span>, ascending<span class="op">=</span><span class="va">False</span>).set_index(<span class="st">'Team'</span>)</span>
<span id="cb11-349"><a href="#cb11-349" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb11-350"><a href="#cb11-350" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb11-351"><a href="#cb11-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-352"><a href="#cb11-352" aria-hidden="true" tabindex="-1"></a><span class="fu">## Reverse Page Rank</span></span>
<span id="cb11-353"><a href="#cb11-353" aria-hidden="true" tabindex="-1"></a>Note that I used alpha = 0.85 and the teleportation vector is <span class="sc">\[</span>1/7, 1/7, 1/7, 1/7, 1/7, 1/7, 1/7<span class="sc">\]</span>.</span>
<span id="cb11-354"><a href="#cb11-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-355"><a href="#cb11-355" aria-hidden="true" tabindex="-1"></a>This ranking is done by taking the transpose of the matrix and applying the equation (I - aP)x = (1-a)v where P is the transition matrix, v is the teleportation vector, and a is the damping factor. The general intuition behind this method is that it tells us the amount of different teams that one specific team would lead to. Applied to this case, we're ranking by the strength of each team. </span>
<span id="cb11-356"><a href="#cb11-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-357"><a href="#cb11-357" aria-hidden="true" tabindex="-1"></a>The most notable change is that 5 first rather than 7 and this difference could be due to the teleportation vector. The intuition behind the teleportation vector in this scenario is that we're making it equally likely that a team beats another team, thus reducing the impact of the other wins. Additionally, we can note that 5 did beat 7 which beat a lot of other teams and while this is taken into account in the vertex power ranking, it perhaps is emphasized more here.</span>
<span id="cb11-358"><a href="#cb11-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-361"><a href="#cb11-361" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb11-362"><a href="#cb11-362" aria-hidden="true" tabindex="-1"></a><span class="co"># reverse graph</span></span>
<span id="cb11-363"><a href="#cb11-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-364"><a href="#cb11-364" aria-hidden="true" tabindex="-1"></a>M <span class="op">=</span> np.zeros((<span class="dv">7</span>,<span class="dv">7</span>))</span>
<span id="cb11-365"><a href="#cb11-365" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">0</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-366"><a href="#cb11-366" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">2</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-367"><a href="#cb11-367" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">1</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-368"><a href="#cb11-368" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">3</span>,<span class="dv">4</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-369"><a href="#cb11-369" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-370"><a href="#cb11-370" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-371"><a href="#cb11-371" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">5</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-372"><a href="#cb11-372" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-373"><a href="#cb11-373" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-374"><a href="#cb11-374" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">1</span>,<span class="dv">5</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-375"><a href="#cb11-375" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-376"><a href="#cb11-376" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-377"><a href="#cb11-377" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">6</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-378"><a href="#cb11-378" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">5</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-379"><a href="#cb11-379" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">4</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-380"><a href="#cb11-380" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">5</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-381"><a href="#cb11-381" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-382"><a href="#cb11-382" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-383"><a href="#cb11-383" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">5</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-384"><a href="#cb11-384" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">0</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-385"><a href="#cb11-385" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">5</span>,<span class="dv">2</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-386"><a href="#cb11-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-387"><a href="#cb11-387" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> M.transpose()</span>
<span id="cb11-388"><a href="#cb11-388" aria-hidden="true" tabindex="-1"></a>D <span class="op">=</span> np.identity(<span class="dv">7</span>)</span>
<span id="cb11-389"><a href="#cb11-389" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">7</span>):</span>
<span id="cb11-390"><a href="#cb11-390" aria-hidden="true" tabindex="-1"></a>    D[i,i] <span class="op">=</span> <span class="dv">1</span><span class="op">/</span>(np.<span class="bu">sum</span>(T[i],axis <span class="op">=</span> <span class="dv">0</span>))</span>
<span id="cb11-391"><a href="#cb11-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-392"><a href="#cb11-392" aria-hidden="true" tabindex="-1"></a><span class="co"># transition matrix</span></span>
<span id="cb11-393"><a href="#cb11-393" aria-hidden="true" tabindex="-1"></a>P <span class="op">=</span> np.dot(T.transpose(),D)</span>
<span id="cb11-394"><a href="#cb11-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-395"><a href="#cb11-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-396"><a href="#cb11-396" aria-hidden="true" tabindex="-1"></a><span class="co"># teleportation vector</span></span>
<span id="cb11-397"><a href="#cb11-397" aria-hidden="true" tabindex="-1"></a>v <span class="op">=</span> np.array([<span class="dv">1</span><span class="op">/</span><span class="dv">7</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">7</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">7</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">7</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">7</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">7</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">7</span>])</span>
<span id="cb11-398"><a href="#cb11-398" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="fl">0.85</span></span>
<span id="cb11-399"><a href="#cb11-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-400"><a href="#cb11-400" aria-hidden="true" tabindex="-1"></a>lhs <span class="op">=</span> (np.identity(<span class="dv">7</span>) <span class="op">-</span> a <span class="op">*</span> P)</span>
<span id="cb11-401"><a href="#cb11-401" aria-hidden="true" tabindex="-1"></a>rhs <span class="op">=</span> (<span class="dv">1</span><span class="op">-</span>a) <span class="op">*</span> v</span>
<span id="cb11-402"><a href="#cb11-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-403"><a href="#cb11-403" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linalg.solve(lhs, rhs)</span>
<span id="cb11-404"><a href="#cb11-404" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'Team'</span>: team, <span class="st">'Reverse Page Rank'</span>: x}).sort_values(by<span class="op">=</span><span class="st">'Reverse Page Rank'</span>, ascending<span class="op">=</span><span class="va">False</span>).set_index(<span class="st">'Team'</span>)</span>
<span id="cb11-405"><a href="#cb11-405" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb11-406"><a href="#cb11-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-407"><a href="#cb11-407" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb11-408"><a href="#cb11-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-409"><a href="#cb11-409" aria-hidden="true" tabindex="-1"></a><span class="fu">## Weighted Vertex Power</span></span>
<span id="cb11-410"><a href="#cb11-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-411"><a href="#cb11-411" aria-hidden="true" tabindex="-1"></a>With the added weights to the adjacency matrix, the ranking becomes more accurate. Weights help take into consideration how convincingly the team won while punishing those that were a closer game. Rankings show again, and more convincingly, that 7 is at the top with 5 not too close behind but the rest of the teams are more spread out. This helps show that more nuance in the skill disparity between the teams. </span>
<span id="cb11-412"><a href="#cb11-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-413"><a href="#cb11-413" aria-hidden="true" tabindex="-1"></a>Note I couldn't figure out how to rename the nodes to 1-7 instead of 0-6.</span>
<span id="cb11-416"><a href="#cb11-416" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb11-417"><a href="#cb11-417" aria-hidden="true" tabindex="-1"></a><span class="co"># weighted adjacency matrix</span></span>
<span id="cb11-418"><a href="#cb11-418" aria-hidden="true" tabindex="-1"></a>M <span class="op">=</span> np.zeros((<span class="dv">7</span>,<span class="dv">7</span>))</span>
<span id="cb11-419"><a href="#cb11-419" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">0</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb11-420"><a href="#cb11-420" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">2</span>] <span class="op">=</span> <span class="dv">8</span></span>
<span id="cb11-421"><a href="#cb11-421" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">1</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">7</span></span>
<span id="cb11-422"><a href="#cb11-422" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">3</span>,<span class="dv">4</span>] <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb11-423"><a href="#cb11-423" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">7</span></span>
<span id="cb11-424"><a href="#cb11-424" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">7</span></span>
<span id="cb11-425"><a href="#cb11-425" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">5</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">23</span></span>
<span id="cb11-426"><a href="#cb11-426" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb11-427"><a href="#cb11-427" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb11-428"><a href="#cb11-428" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">1</span>,<span class="dv">5</span>] <span class="op">=</span> <span class="dv">18</span></span>
<span id="cb11-429"><a href="#cb11-429" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">13</span></span>
<span id="cb11-430"><a href="#cb11-430" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">14</span></span>
<span id="cb11-431"><a href="#cb11-431" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">6</span>] <span class="op">=</span> <span class="dv">7</span></span>
<span id="cb11-432"><a href="#cb11-432" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">5</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">13</span></span>
<span id="cb11-433"><a href="#cb11-433" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="dv">4</span>] <span class="op">=</span> <span class="dv">7</span></span>
<span id="cb11-434"><a href="#cb11-434" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">5</span>] <span class="op">=</span> <span class="dv">18</span></span>
<span id="cb11-435"><a href="#cb11-435" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">0</span>] <span class="op">=</span> <span class="dv">45</span></span>
<span id="cb11-436"><a href="#cb11-436" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">4</span>,<span class="dv">1</span>] <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb11-437"><a href="#cb11-437" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">6</span>,<span class="dv">5</span>] <span class="op">=</span> <span class="dv">19</span></span>
<span id="cb11-438"><a href="#cb11-438" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">0</span>,<span class="dv">3</span>] <span class="op">=</span> <span class="dv">14</span></span>
<span id="cb11-439"><a href="#cb11-439" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">5</span>,<span class="dv">2</span>] <span class="op">=</span> <span class="dv">13</span></span>
<span id="cb11-440"><a href="#cb11-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-441"><a href="#cb11-441" aria-hidden="true" tabindex="-1"></a>display(M)</span>
<span id="cb11-442"><a href="#cb11-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-443"><a href="#cb11-443" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> nx.from_numpy_array(np.matrix(M), create_using<span class="op">=</span>nx.DiGraph)</span>
<span id="cb11-444"><a href="#cb11-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-445"><a href="#cb11-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-446"><a href="#cb11-446" aria-hidden="true" tabindex="-1"></a>layout <span class="op">=</span> nx.spring_layout(G)</span>
<span id="cb11-447"><a href="#cb11-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-448"><a href="#cb11-448" aria-hidden="true" tabindex="-1"></a>nx.draw(G, layout, with_labels<span class="op">=</span><span class="va">True</span>, node_size <span class="op">=</span> <span class="dv">1000</span>, node_color <span class="op">=</span> <span class="st">'lightblue'</span>, font_size <span class="op">=</span> <span class="dv">20</span>, font_color <span class="op">=</span> <span class="st">'black'</span>)</span>
<span id="cb11-449"><a href="#cb11-449" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> nx.get_edge_attributes(G, <span class="st">"weight"</span>)</span>
<span id="cb11-450"><a href="#cb11-450" aria-hidden="true" tabindex="-1"></a>nx.draw_networkx_edge_labels(G, pos<span class="op">=</span>layout, edge_labels<span class="op">=</span>labels)</span>
<span id="cb11-451"><a href="#cb11-451" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb11-452"><a href="#cb11-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-453"><a href="#cb11-453" aria-hidden="true" tabindex="-1"></a>Msquared <span class="op">=</span> np.dot(M,M)</span>
<span id="cb11-454"><a href="#cb11-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-455"><a href="#cb11-455" aria-hidden="true" tabindex="-1"></a>vertex_power_matrix <span class="op">=</span> Msquared <span class="op">+</span> M</span>
<span id="cb11-456"><a href="#cb11-456" aria-hidden="true" tabindex="-1"></a>vertex_power <span class="op">=</span> np.<span class="bu">sum</span>(vertex_power_matrix, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb11-457"><a href="#cb11-457" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'Team'</span>: team, <span class="st">'Vertex Power'</span>: vertex_power}).sort_values(by<span class="op">=</span><span class="st">'Vertex Power'</span>, ascending<span class="op">=</span><span class="va">False</span>).set_index(<span class="st">'Team'</span>)</span>
<span id="cb11-458"><a href="#cb11-458" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb11-459"><a href="#cb11-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-460"><a href="#cb11-460" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>