<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vincent Zheng">
<meta name="dcterms.date" content="2024-05-05">

<title>Project 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="project2_files/libs/clipboard/clipboard.min.js"></script>
<script src="project2_files/libs/quarto-html/quarto.js"></script>
<script src="project2_files/libs/quarto-html/popper.min.js"></script>
<script src="project2_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="project2_files/libs/quarto-html/anchor.min.js"></script>
<link href="project2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="project2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="project2_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="project2_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="project2_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Project 2</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Vincent Zheng </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 5, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell" data-execution_count="1">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sympy <span class="im">as</span> sp</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> networkx <span class="im">as</span> nx</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> PIL <span class="im">import</span> Image</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.linalg <span class="im">import</span> norm</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.linalg <span class="im">import</span> lstsq</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.sparse <span class="im">import</span> csr_matrix</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="modeling-with-directed-graphs" class="level1">
<h1>Modeling with Directed Graphs</h1>
<p>Here, I first create a picture of the digraph with the given nodes and edges.</p>
<div class="cell" data-execution_count="2">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># drawing diagraph</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>nodes <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>edges <span class="op">=</span> [[<span class="dv">1</span>,<span class="dv">2</span>], [<span class="dv">2</span>,<span class="dv">3</span>], [<span class="dv">3</span>,<span class="dv">4</span>], [<span class="dv">4</span>,<span class="dv">2</span>], [<span class="dv">1</span>,<span class="dv">4</span>], [<span class="dv">3</span>,<span class="dv">1</span>], [<span class="dv">3</span>,<span class="dv">6</span>], [<span class="dv">6</span>,<span class="dv">3</span>], [<span class="dv">4</span>,<span class="dv">5</span>], [<span class="dv">5</span>,<span class="dv">6</span>]]</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> nx.DiGraph() </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>G.add_nodes_from(nodes)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>G.add_edges_from(edges)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>layout <span class="op">=</span> nx.shell_layout(G) </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>nx.draw(G, layout, with_labels<span class="op">=</span><span class="va">True</span>, node_size <span class="op">=</span> <span class="dv">5000</span>, node_color <span class="op">=</span> <span class="st">'lightblue'</span>, font_size <span class="op">=</span> <span class="dv">20</span>, font_color <span class="op">=</span> <span class="st">'black'</span>, connectionstyle <span class="op">=</span> <span class="st">'arc3, rad = 0.1'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="project2_files/figure-html/cell-3-output-1.png" width="691" height="499"></p>
</div>
</div>
<p>Then, I create the incidence matrix of the digraph which is done by filling a matrix with -1 at the ith row of the xth edge if it’s leaving the ith node and a 1 at the jth row of the xth edge if it’s leavin the jth node. For example, the first column has -1 at the first row and 1 at the 2th row since the first edge is leaving node 1 and entering node 2.</p>
<div class="cell" data-execution_count="3">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># incidence matrix</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>incidence <span class="op">=</span> nx.incidence_matrix(G, oriented<span class="op">=</span><span class="va">True</span>) </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> sp.Matrix(incidence.toarray())</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>display(A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}-1.0 &amp; -1.0 &amp; 0 &amp; 0 &amp; 1.0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\1.0 &amp; 0 &amp; -1.0 &amp; 0 &amp; 0 &amp; 0 &amp; 1.0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; 1.0 &amp; -1.0 &amp; -1.0 &amp; -1.0 &amp; 0 &amp; 0 &amp; 0 &amp; 1.0\\0 &amp; 1.0 &amp; 0 &amp; 1.0 &amp; 0 &amp; 0 &amp; -1.0 &amp; -1.0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1.0 &amp; -1.0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1.0 &amp; 0 &amp; 0 &amp; 1.0 &amp; -1.0\end{matrix}\right]\)</span></p>
</div>
</div>
<div class="cell" data-execution_count="4">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rref form of A</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>A_rref <span class="op">=</span> A.rref()</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>display(A_rref)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># basis for the null space of A</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>A_nullspace <span class="op">=</span> A.nullspace()</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># basis for algebraic loop</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> A_nullspace:</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    display(i)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co"># tweaking to get basis for geometric loop</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>A_geometric <span class="op">=</span> A_nullspace.copy()</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>A_geometric[<span class="dv">0</span>] <span class="op">=</span> A_nullspace[<span class="dv">0</span>] <span class="op">+</span> A_nullspace[<span class="dv">2</span>]</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>A_geometric[<span class="dv">2</span>] <span class="op">=</span> A_nullspace[<span class="dv">1</span>] <span class="op">+</span> A_nullspace[<span class="dv">2</span>]</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>A_geometric[<span class="dv">3</span>] <span class="op">=</span> A_nullspace[<span class="dv">1</span>] <span class="op">+</span> A_nullspace[<span class="dv">4</span>] <span class="op">+</span> A_nullspace[<span class="dv">3</span>]</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Basis for geometric loop"</span>)</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> A_geometric:</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    display(i)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>(Matrix([
 [1, 0, 0, -1.0, -1.0, 0,  1.0, 0,  1.0,    0],
 [0, 1, 0,  1.0,    0, 0, -1.0, 0, -1.0,    0],
 [0, 0, 1, -1.0, -1.0, 0,    0, 0,  1.0,    0],
 [0, 0, 0,    0,    0, 1,    0, 0,  1.0, -1.0],
 [0, 0, 0,    0,    0, 0,    0, 1, -1.0,    0],
 [0, 0, 0,    0,    0, 0,    0, 0,    0,    0]]),
 (0, 1, 2, 5, 7))</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}1.0\\-1.0\\1.0\\1\\0\\0\\0\\0\\0\\0\end{matrix}\right]\)</span></p>
</div>
<div class="cell-output cell-output-display">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}1.0\\0\\1.0\\0\\1\\0\\0\\0\\0\\0\end{matrix}\right]\)</span></p>
</div>
<div class="cell-output cell-output-display">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}-1.0\\1.0\\0\\0\\0\\0\\1\\0\\0\\0\end{matrix}\right]\)</span></p>
</div>
<div class="cell-output cell-output-display">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}-1.0\\1.0\\-1.0\\0\\0\\-1.0\\0\\1.0\\1\\0\end{matrix}\right]\)</span></p>
</div>
<div class="cell-output cell-output-display">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}0\\0\\0\\0\\0\\1.0\\0\\0\\0\\1\end{matrix}\right]\)</span></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Basis for geometric loop</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}0\\0\\1.0\\1\\0\\0\\1\\0\\0\\0\end{matrix}\right]\)</span></p>
</div>
<div class="cell-output cell-output-display">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}1.0\\0\\1.0\\0\\1\\0\\0\\0\\0\\0\end{matrix}\right]\)</span></p>
</div>
<div class="cell-output cell-output-display">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}0\\1.0\\1.0\\0\\1\\0\\1\\0\\0\\0\end{matrix}\right]\)</span></p>
</div>
<div class="cell-output cell-output-display">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}0\\1.0\\0\\0\\1\\0\\0\\1.0\\1\\1\end{matrix}\right]\)</span></p>
</div>
<div class="cell-output cell-output-display">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}0\\0\\0\\0\\0\\1.0\\0\\0\\0\\1\end{matrix}\right]\)</span></p>
</div>
</div>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section">1.</h2>
<p>I’m taking A to be equal to the tranpose of the A used before, to say that Ax is the vector of potential differences across the circuit.</p>
<p>If the vector of potential differences, b satisfies Ax = b, then b is in the column space of A.</p>
<p>If we take the vector y as a vector in the span of the basis of the nullspace of A, which is the algebraic loop, we know that yT*A = 0.</p>
<p>We also know that Ax = b gives yT*A*x = yT*b and now we’ve shown that yT*b = 0. yT*b is the sum of the potential differences across a circuit which we’ve shown to be 0, proving Kirchhoff’s first law.</p>
<p>Thus, the condition must be that b is in the column space of A.</p>
<p>If one takes takes the transpose of the current incidence matrix and multiply it by the potentials of each node, we get:</p>
<div class="cell" data-execution_count="5">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> A.transpose()</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>display(B)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>x1, x2, x3, x4, x5, x6 <span class="op">=</span> sp.symbols(<span class="st">'x1 x2 x3 x4 x5 x6'</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>v <span class="op">=</span> sp.Matrix([x1, x2, x3, x4, x5, x6])</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>display(v)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>Bv <span class="op">=</span> B <span class="op">*</span> v</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>Bv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}-1.0 &amp; 1.0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\-1.0 &amp; 0 &amp; 0 &amp; 1.0 &amp; 0 &amp; 0\\0 &amp; -1.0 &amp; 1.0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; -1.0 &amp; 1.0 &amp; 0 &amp; 0\\1.0 &amp; 0 &amp; -1.0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; -1.0 &amp; 0 &amp; 0 &amp; 1.0\\0 &amp; 1.0 &amp; 0 &amp; -1.0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; -1.0 &amp; 1.0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; -1.0 &amp; 1.0\\0 &amp; 0 &amp; 1.0 &amp; 0 &amp; 0 &amp; -1.0\end{matrix}\right]\)</span></p>
</div>
<div class="cell-output cell-output-display">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}x_{1}\\x_{2}\\x_{3}\\x_{4}\\x_{5}\\x_{6}\end{matrix}\right]\)</span></p>
</div>
<div class="cell-output cell-output-display" data-execution_count="5">
<p><span class="math inline">\(\displaystyle \left[\begin{matrix}- 1.0 x_{1} + 1.0 x_{2}\\- 1.0 x_{1} + 1.0 x_{4}\\- 1.0 x_{2} + 1.0 x_{3}\\- 1.0 x_{3} + 1.0 x_{4}\\1.0 x_{1} - 1.0 x_{3}\\- 1.0 x_{3} + 1.0 x_{6}\\1.0 x_{2} - 1.0 x_{4}\\- 1.0 x_{4} + 1.0 x_{5}\\- 1.0 x_{5} + 1.0 x_{6}\\1.0 x_{3} - 1.0 x_{6}\end{matrix}\right]\)</span></p>
</div>
</div>
</section>
<section id="section-1" class="level2">
<h2 class="anchored" data-anchor-id="section-1">2.</h2>
<p>Kirchhoff’s first law of circuits says that the total flow of current in and out of any node should be 0 which means that the sum of the rows of the incidence matrix should be 0. It’s also given that the sum of the columns of the incidence matrix is 0 because the current flowing out of one node into the other node is the same.</p>
<p>Below shows a digraph with weights that follows Kirchhoff’s first law.</p>
<p>Note that the weight is for an edge is located on the tail of the edge. Sorry if it’s not clear - I spent a lot of time figuring out the labels but apparently networkx doesn’t support labels with an arc and I need the arc to differentiate the 2 edges between 6 and 3.</p>
<div class="cell" data-execution_count="6">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> nx.DiGraph(Directed<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">1</span> , <span class="dv">2</span> , weight<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">2</span> , <span class="dv">3</span> , weight<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">3</span> , <span class="dv">4</span> , weight<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">4</span> , <span class="dv">2</span> , weight<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">1</span> , <span class="dv">4</span> , weight<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">3</span> , <span class="dv">1</span> , weight<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">3</span> , <span class="dv">6</span> , weight<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">6</span> , <span class="dv">3</span> , weight<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">4</span> , <span class="dv">5</span> , weight<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">5</span> , <span class="dv">6</span> , weight<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co"># layout </span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>pos <span class="op">=</span> nx.shell_layout(G) </span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co"># nodes</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="co"># nx.draw_networkx_nodes(G, pos, node_size=5000, node_color="lightblue")</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>nx.draw(G, pos, node_size<span class="op">=</span><span class="dv">5000</span>, node_color<span class="op">=</span><span class="st">"lightblue"</span>, with_labels <span class="op">=</span> <span class="va">True</span>, connectionstyle<span class="op">=</span><span class="st">'arc3, rad = 0.1'</span>)</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="co"># edges</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="co"># nx.draw_networkx_edges(G, pos, edgelist = edge_labels)</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a><span class="co"># node labels</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="co"># nx.draw_networkx_labels(G, pos, font_size=20)</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="co"># edge weight labels</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>edge_labels <span class="op">=</span> nx.get_edge_attributes(G, <span class="st">"weight"</span>)</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>nx.draw_networkx_edge_labels(G, pos, edge_labels, label_pos<span class="op">=</span><span class="fl">0.75</span>)</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> plt.gca()</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>ax.margins(<span class="fl">0.08</span>)</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">"off"</span>)</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/7j/cfsqjhbs481cdyhvqgxc3pww0000gn/T/ipykernel_23385/3965896663.py:35: UserWarning: This figure includes Axes that are not compatible with tight_layout, so results might be incorrect.
  plt.tight_layout()</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="project2_files/figure-html/cell-7-output-2.png" width="691" height="499"></p>
</div>
</div>
</section>
<section id="section-2" class="level2">
<h2 class="anchored" data-anchor-id="section-2">3.</h2>
<p>Since we know that the basis tells us the edges that create a loop, that means the the nodes correspond to the edges can create a loop. Building from this, two basis vectors if they have a common edge (i.e.&nbsp;contains a 1 at the same element), then these vectors form a bigger loop where every node in the loop can communicate with every other node in the loop. For example, the basis vectors [1, 0, 1, 0, 1, 0, 0, 0, 0, 0] and [0, 0, 1, 1, 0, 0, 1, 0, 0, 0] has e3 as a common edge. This basically creates a loop with vector [1, 0 , 1, 1, 1, 0, 1, 0, 0, 0]. This reiterates which allows us to see that every node in our digraph can communicate with every other node.</p>
<p>One way to see this is is to consider the loop 3-4-5-6-3 and 1-2-3-1. Since the two loops have node 3 in common, any node in a loop can communicate with any other node in the other loop through node 3.</p>
</section>
</section>
<section id="image-compression-and-edge-detection" class="level1">
<h1>Image Compression and Edge Detection</h1>
<p>I picked Vincent van Gogh’s Starry Night as the image and the grayscale version of the image is shown below.</p>
<div class="cell" data-execution_count="7">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># original image</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>fname <span class="op">=</span> <span class="st">'/Users/zheng/Downloads/UChicago/Sophomore Year/Applications in Linear Algebra/project2/image.png'</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>image <span class="op">=</span> Image.<span class="bu">open</span>(fname).convert(<span class="st">"L"</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> np.asarray(image)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>plt.imshow(arr, cmap<span class="op">=</span><span class="st">'gray'</span>, aspect <span class="op">=</span> <span class="st">'auto'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>&lt;matplotlib.image.AxesImage at 0x138595d00&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="project2_files/figure-html/cell-8-output-2.png" width="575" height="416"></p>
</div>
</div>
<p>I first created the haar wavelet transform matrix which is applied to the image to create four quadrants, one of which is the blurry quadrant and the rest gives us the horizontal, vertical, and diagonal edges. One can see that the blurry quadrant is quite similar to the original after one iteration.</p>
<div class="cell" data-execution_count="8">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># haar wavelet transform matrix</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> haar(n):</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  count <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  U <span class="op">=</span> np.zeros((<span class="bu">int</span>(n<span class="op">/</span><span class="dv">2</span>),n)) </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># U</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> i <span class="kw">in</span> np.arange(<span class="dv">0</span>,<span class="bu">len</span>(U)):</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(U[i])):</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> j <span class="op">==</span> count <span class="kw">or</span> j <span class="op">==</span> count <span class="op">+</span> <span class="dv">1</span>:</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>        U[i][j] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    count <span class="op">+=</span> <span class="dv">2</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># V</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  count <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  V <span class="op">=</span> np.zeros((<span class="bu">int</span>(n<span class="op">/</span><span class="dv">2</span>),n))</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> i <span class="kw">in</span> np.arange(<span class="dv">0</span>,<span class="bu">len</span>(V)):</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(V[i])):</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> j <span class="op">==</span> count:</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>        V[i][j] <span class="op">=</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>      <span class="cf">elif</span> j <span class="op">==</span> count <span class="op">+</span> <span class="dv">1</span>:</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>        V[i][j] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    count <span class="op">+=</span> <span class="dv">2</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># W</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>  W <span class="op">=</span> np.concatenate((U, V), axis<span class="op">=</span><span class="dv">0</span>) <span class="op">*</span> math.sqrt(<span class="dv">2</span>) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> W</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a><span class="co"># applying haar wavelet transform</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>m, n <span class="op">=</span> arr.shape</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>Wm <span class="op">=</span> haar(m) </span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>Wn <span class="op">=</span> haar(n)</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>Wnt <span class="op">=</span> Wn.transpose()</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>test <span class="op">=</span> np.dot(arr, Wnt)</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>test <span class="op">=</span> np.dot(Wm, test) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2, ax3) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">3</span>, figsize <span class="op">=</span> (<span class="dv">12</span><span class="op">*</span><span class="fl">1.25</span>, <span class="dv">3</span><span class="op">*</span><span class="fl">1.25</span>))</span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a><span class="co"># four quadrants</span></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>ax1.imshow(test, cmap<span class="op">=</span><span class="st">"gray"</span>, aspect <span class="op">=</span> <span class="st">'auto'</span>)</span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">"four quadrants"</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a><span class="co"># blurry quadrant</span></span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>blurry <span class="op">=</span> test[<span class="dv">0</span>:<span class="bu">int</span>(m<span class="op">/</span><span class="dv">2</span>), <span class="dv">0</span>:<span class="bu">int</span>(n<span class="op">/</span><span class="dv">2</span>)]</span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>ax2.imshow(blurry, cmap<span class="op">=</span><span class="st">"gray"</span>, aspect <span class="op">=</span> <span class="st">'auto'</span>)</span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">"blurry quadrant"</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a><span class="co"># original</span></span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a>ax3.imshow(arr, cmap<span class="op">=</span><span class="st">"gray"</span>, aspect <span class="op">=</span> <span class="st">'auto'</span>)</span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a>ax3.set_title(<span class="st">"original"</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="project2_files/figure-html/cell-9-output-1.png" width="1170" height="337"></p>
</div>
</div>
<p>Just to check, I applied the inverse of the Haar wavelet transform to the four quadrants and multipled by two to regain my original image. To check that it’s the same image, I calculated the norm of the difference between the original and the image after the inverse Haar wavelet transform.</p>
<div class="cell" data-execution_count="9">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>test_orig <span class="op">=</span> np.dot(test, Wn)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>test_orig <span class="op">=</span> np.dot(Wm.transpose(), test_orig) <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>plt.imshow(test_orig, cmap<span class="op">=</span><span class="st">'gray'</span>, aspect <span class="op">=</span> <span class="st">'auto'</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>dif <span class="op">=</span> test_orig <span class="op">-</span> arr</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"norm: </span><span class="sc">{</span>norm(dif)<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>norm: 1.9662717144104968e-11</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="project2_files/figure-html/cell-10-output-2.png" width="575" height="416"></p>
</div>
</div>
<p>After trying various iterations, I’ve decided that 4 iterations of the Haar wavelet transform still retains the image well enough while compressing it. At this stage, one can still recognize his piece but after the 4th iteration, the image becomes too blurry.</p>
<div class="cell" data-execution_count="10">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>iterations <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>iter0 <span class="op">=</span> arr.copy()</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>titles <span class="op">=</span> [<span class="st">"3rd iteration"</span>, <span class="st">"4th iteration"</span>, <span class="st">"5th iteration"</span>]</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span><span class="op">*</span><span class="fl">1.25</span>, <span class="dv">3</span><span class="op">*</span><span class="fl">1.25</span>))</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(<span class="dv">1</span>, iterations <span class="op">+</span> <span class="dv">1</span>, <span class="dv">1</span>):</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># creating haar matrix</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  m, n <span class="op">=</span> iter0.shape</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  Wm <span class="op">=</span> haar(m) </span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  Wn <span class="op">=</span> haar(n)</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  Wnt <span class="op">=</span> Wn.transpose()</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># multiplying to get the four quadrants</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  iter1 <span class="op">=</span> np.dot(iter0, Wnt)</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>  iter1 <span class="op">=</span> np.dot(Wm, iter1) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># keeping the blurry quadrant</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>  iter0 <span class="op">=</span> iter1[<span class="dv">0</span>:<span class="bu">int</span>(m<span class="op">/</span><span class="dv">2</span>), <span class="dv">0</span>:<span class="bu">int</span>(n<span class="op">/</span><span class="dv">2</span>)]</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># display</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> i <span class="op">&gt;=</span> iterations <span class="op">-</span> <span class="dv">2</span> <span class="kw">and</span> i <span class="op">&lt;=</span> iterations:</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>    ax <span class="op">=</span> fig.add_subplot(<span class="dv">1</span>, <span class="dv">3</span>, i <span class="op">-</span> <span class="dv">2</span>)</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>    ax.imshow(iter0, cmap<span class="op">=</span><span class="st">"gray"</span>, aspect <span class="op">=</span> <span class="st">'auto'</span>)</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    ax.set_title(titles[i<span class="op">-</span><span class="dv">3</span>], fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="project2_files/figure-html/cell-11-output-1.png" width="1162" height="337"></p>
</div>
</div>
<p>Another way to compress the image is by taking the edges from the result of the haar wavelet transform and applying a threshold that sets all pixels that are below the threshold to black (0). Shown below is the reconstructed image after applying a threshold of 15.</p>
<div class="cell" data-execution_count="11">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>threshold <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>edge <span class="op">=</span> test.copy()</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># removing the blurry quadrant</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>edge[<span class="dv">0</span>:<span class="bu">int</span>(m<span class="op">/</span><span class="dv">2</span>), <span class="dv">0</span>:<span class="bu">int</span>(n<span class="op">/</span><span class="dv">2</span>)] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># applying threshold</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(edge)):</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(edge[i])):</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> edge[i][j] <span class="op">&lt;</span> threshold:</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>      edge[i][j] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co"># percent of black pixels (to check code is working)</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>np.count_nonzero(edge<span class="op">==</span><span class="dv">0</span>)<span class="op">/</span>(<span class="dv">544</span><span class="op">*</span><span class="dv">700</span>)</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="co"># putting back the blurry quadrant</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>edge[<span class="dv">0</span>:<span class="bu">int</span>(m<span class="op">/</span><span class="dv">2</span>), <span class="dv">0</span>:<span class="bu">int</span>(n<span class="op">/</span><span class="dv">2</span>)] <span class="op">=</span> test[<span class="dv">0</span>:<span class="bu">int</span>(m<span class="op">/</span><span class="dv">2</span>), <span class="dv">0</span>:<span class="bu">int</span>(n<span class="op">/</span><span class="dv">2</span>)]</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="co"># getting back original image</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>m, n <span class="op">=</span> edge.shape</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>Wm <span class="op">=</span> haar(m) </span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>Wn <span class="op">=</span> haar(n)</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>Wmt <span class="op">=</span> Wm.transpose()</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>edge_orig <span class="op">=</span> np.dot(edge, Wn)</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>edge_orig <span class="op">=</span> np.dot(Wmt, edge_orig) <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a><span class="co"># plotting</span></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2, ax3) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">3</span>, figsize <span class="op">=</span> (<span class="dv">12</span><span class="op">*</span><span class="fl">1.25</span>, <span class="dv">3</span><span class="op">*</span><span class="fl">1.25</span>))</span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a><span class="co"># four quadrants</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>ax1.imshow(edge, cmap<span class="op">=</span><span class="st">"gray"</span>, aspect <span class="op">=</span> <span class="st">'auto'</span>)</span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">"four quadrants"</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a><span class="co"># reconstructed</span></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>ax2.imshow(edge_orig, cmap<span class="op">=</span><span class="st">"gray"</span>, aspect <span class="op">=</span> <span class="st">'auto'</span>)</span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">"reconstructed"</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a><span class="co"># original</span></span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a>ax3.imshow(arr, cmap<span class="op">=</span><span class="st">"gray"</span>, aspect <span class="op">=</span> <span class="st">'auto'</span>)</span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a>ax3.set_title(<span class="st">"original"</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="project2_files/figure-html/cell-12-output-1.png" width="1170" height="337"></p>
</div>
</div>
<p>Although the restructed and original images look the same, one can check by taking the norm again and notice the vast difference from the previous norm.</p>
<div class="cell" data-execution_count="12">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>dif <span class="op">=</span> edge_orig <span class="op">-</span> arr</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"norm: </span><span class="sc">{</span>norm(dif)<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>norm: 9338.635486515148</code></pre>
</div>
</div>
<p>To compare the sizes of the arrays, I used np.array’s data.nbytes to get the byte size of the arrays. Obviously, the blurry quadrant is 1/4 of the 4 quadrants but one can see hat the edge compressed recontructed image is almost the same proportion as the just the blurry quadrant while retaining information.</p>
<p>Additionally, one would notice that the byte size of teh original image was significant smaller than the compressed versions and I was confused so I did some research. I think it’s because Pillow used more sophisticated compression techniques to compress the image when we read the image.</p>
<div class="cell" data-execution_count="13">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># size of the original image</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>arr_size <span class="op">=</span> arr.data.nbytes</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># size of the edge detected array</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>Sedge <span class="op">=</span> csr_matrix(edge)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>sparse_size <span class="op">=</span> Sedge.data.nbytes</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># size of the blurry image</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>blurry_size <span class="op">=</span> test[<span class="dv">0</span>:<span class="bu">int</span>(m<span class="op">/</span><span class="dv">2</span>), <span class="dv">0</span>:<span class="bu">int</span>(n<span class="op">/</span><span class="dv">2</span>)].data.nbytes</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="co"># size of the four quadrants</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>four_size <span class="op">=</span> test.data.nbytes</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"byte size of the blurry quadrant: </span><span class="sc">{</span>blurry_size<span class="sc">}{</span><span class="st">"</span><span class="ch">\n</span><span class="st">"</span><span class="sc">}</span><span class="ss">byte size of CSR matrix: </span><span class="sc">{</span>sparse_size<span class="sc">}{</span><span class="st">"</span><span class="ch">\n</span><span class="st">"</span><span class="sc">}</span><span class="ss">byte size of original image: </span><span class="sc">{</span>arr_size<span class="sc">}{</span><span class="st">"</span><span class="ch">\n</span><span class="st">"</span><span class="sc">}</span><span class="ss">byte size of four quadrants: </span><span class="sc">{</span>four_size<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="co"># proportions</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Proportion of the blurry quadrant: </span><span class="sc">{</span>blurry_size<span class="op">/</span>four_size<span class="sc">}{</span><span class="st">"</span><span class="ch">\n</span><span class="st">"</span><span class="sc">}</span><span class="ss">Proportion of the edge compressed image: </span><span class="sc">{</span>sparse_size<span class="op">/</span>four_size<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>byte size of the blurry quadrant: 775600
byte size of CSR matrix: 915672
byte size of original image: 387800
byte size of four quadrants: 3102400
Proportion of the blurry quadrant: 0.25
Proportion of the edge compressed image: 0.295149561629706</code></pre>
</div>
</div>
</section>
<section id="least-squares" class="level1">
<h1>Least Squares</h1>
<p>For my data set, I recorded results from the 2023-2024 Ivy League Conference Games. The data set is shown below.</p>
<div class="cell" data-execution_count="14">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>games <span class="op">=</span> pd.read_csv(<span class="st">"/Users/zheng/Downloads/UChicago/Sophomore Year/Applications in Linear Algebra/project2/2023-2024 Ivy Conference Games - Sheet1.csv"</span>).set_index(<span class="st">"TEAMS"</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>games</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="14">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">PRINCETON</th>
<th data-quarto-table-cell-role="th">HARVARD</th>
<th data-quarto-table-cell-role="th">PENN</th>
<th data-quarto-table-cell-role="th">DARTMOUTH</th>
<th data-quarto-table-cell-role="th">COLUMBIA</th>
<th data-quarto-table-cell-role="th">CORNELL</th>
<th data-quarto-table-cell-role="th">YALE</th>
<th data-quarto-table-cell-role="th">BROWN</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">TEAMS</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">PRINCETON</td>
<td>NaN</td>
<td>89.0</td>
<td>77.0</td>
<td>76.0</td>
<td>70.0</td>
<td>68.0</td>
<td>64.0</td>
<td>72.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">HARVARD</td>
<td>58.0</td>
<td>NaN</td>
<td>70.0</td>
<td>NaN</td>
<td>62.0</td>
<td>60.0</td>
<td>NaN</td>
<td>72.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">PENN</td>
<td>70.0</td>
<td>61.0</td>
<td>NaN</td>
<td>80.0</td>
<td>81.0</td>
<td>NaN</td>
<td>NaN</td>
<td>61.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">DARTMOUTH</td>
<td>58.0</td>
<td>NaN</td>
<td>51.0</td>
<td>NaN</td>
<td>53.0</td>
<td>NaN</td>
<td>51.0</td>
<td>75.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">COLUMBIA</td>
<td>62.0</td>
<td>59.0</td>
<td>84.0</td>
<td>72.0</td>
<td>NaN</td>
<td>79.0</td>
<td>70.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">CORNELL</td>
<td>83.0</td>
<td>NaN</td>
<td>77.0</td>
<td>56.0</td>
<td>81.0</td>
<td>NaN</td>
<td>NaN</td>
<td>84.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">YALE</td>
<td>70.0</td>
<td>78.0</td>
<td>NaN</td>
<td>76.0</td>
<td>89.0</td>
<td>NaN</td>
<td>NaN</td>
<td>80.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">BROWN</td>
<td>63.0</td>
<td>74.0</td>
<td>70.0</td>
<td>71.0</td>
<td>NaN</td>
<td>83.0</td>
<td>70.0</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>I first had to create the matrices and the vector b by calculating the differences for every game played.</p>
<div class="cell" data-execution_count="15">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> [<span class="dv">31</span>,<span class="dv">7</span>,<span class="dv">18</span>,<span class="dv">8</span>,<span class="op">-</span><span class="dv">15</span>,<span class="op">-</span><span class="dv">6</span>,<span class="dv">9</span>,<span class="dv">9</span>,<span class="dv">3</span>,<span class="op">-</span><span class="dv">13</span>,<span class="op">-</span><span class="dv">2</span>,<span class="dv">29</span>,<span class="op">-</span><span class="dv">3</span>,<span class="op">-</span><span class="dv">17</span>,<span class="op">-</span><span class="dv">9</span>,<span class="op">-</span><span class="dv">16</span>,<span class="op">-</span><span class="dv">3</span>,<span class="op">-</span><span class="dv">24</span>,<span class="dv">4</span>,<span class="op">-</span><span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">10</span>]</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"b: </span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>g1 <span class="op">=</span> [<span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>g2 <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>g3 <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>g4 <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>g5 <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>g6 <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>]</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>g7 <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>g8 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>g9 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>g10 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>g11 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>g12 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>g13 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>g14 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>g15 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>g16 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>g17 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>g18 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>]</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>g19 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>g20 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>g21 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>]</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>g22 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>]</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>g23 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> np.array([g1,g2,g3,g4,g5,g6,g7,g8,g9,g10,g11,g12,g13,g14,g15,g16,g17,g18,g19,g20,g21,g22,g23])</span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"A: </span><span class="sc">{</span>A<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>b: [31, 7, 18, 8, -15, -6, 9, 9, 3, -13, -2, 29, -3, -17, -9, -16, -3, -24, 4, -2, 1, 1, 10]
A: [[ 1 -1  0  0  0  0  0  0]
 [ 1  0 -1  0  0  0  0  0]
 [ 1  0  0 -1  0  0  0  0]
 [ 1  0  0  0 -1  0  0  0]
 [ 1  0  0  0  0 -1  0  0]
 [ 1  0  0  0  0  0 -1  0]
 [ 1  0  0  0  0  0  0 -1]
 [ 0  1 -1  0  0  0  0  0]
 [ 0  1  0  0 -1  0  0  0]
 [ 0  1  0  0  0 -1  0  0]
 [ 0  1  0  0  0  0  0 -1]
 [ 0  0  1 -1  0  0  0  0]
 [ 0  0  1  0 -1  0  0  0]
 [ 0  0  1  0  0 -1  0  0]
 [ 0  0  1  0  0  0  0 -1]
 [ 0  0  0  1 -1  0  0  0]
 [ 0  0  0  1  0 -1  0  0]
 [ 0  0  0  1  0  0 -1  0]
 [ 0  0  0  1  0  0  0 -1]
 [ 0  0  0  0  1 -1  0  0]
 [ 0  0  0  0  1  0 -1  0]
 [ 0  0  0  0  0  1 -1  0]
 [ 0  0  0  0  0  1  0 -1]]</code></pre>
</div>
</div>
<p>Then, I could use least squares to find the best solution v for the system which gave me the below values. This is the potential of each school. The team with the higher potential is obviously the better team. A way to reach this conclusion is considering that that number corresponding to the school is the base potential spread and depending on the team you’re facing, your potential spread will increase or decrease, increase if the other team’s potential is negative and decrease if the other team’s potential is positive.</p>
<div class="cell" data-execution_count="16">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>v, <span class="op">*</span>_ <span class="op">=</span> lstsq(A, b)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>schools <span class="op">=</span> games.index.to_list()</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>potentials <span class="op">=</span> pd.DataFrame(v, index <span class="op">=</span> schools, columns <span class="op">=</span> [<span class="st">"Potential"</span>])</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>display(potentials)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Potential</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">PRINCETON</td>
<td>6.500000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">HARVARD</td>
<td>-5.076464</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">PENN</td>
<td>-3.431327</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">DARTMOUTH</td>
<td>-11.560505</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">COLUMBIA</td>
<td>1.512666</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">CORNELL</td>
<td>7.625000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">YALE</td>
<td>8.019290</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">BROWN</td>
<td>-3.588659</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>We can iteratively calculate every difference between the potentials of the schools to see the point spread in every potential matchup.</p>
<div class="cell" data-execution_count="17">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> combinations</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, j <span class="kw">in</span> combinations(schools, <span class="dv">2</span>):</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  difference <span class="op">=</span> v[schools.index(i)] <span class="op">-</span> v[schools.index(j)]</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  difference <span class="op">=</span> np.<span class="bu">round</span>(difference,<span class="dv">2</span>)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> - </span><span class="sc">{</span>j<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>difference<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>PRINCETON - HARVARD: 11.58
PRINCETON - PENN: 9.93
PRINCETON - DARTMOUTH: 18.06
PRINCETON - COLUMBIA: 4.99
PRINCETON - CORNELL: -1.12
PRINCETON - YALE: -1.52
PRINCETON - BROWN: 10.09
HARVARD - PENN: -1.65
HARVARD - DARTMOUTH: 6.48
HARVARD - COLUMBIA: -6.59
HARVARD - CORNELL: -12.7
HARVARD - YALE: -13.1
HARVARD - BROWN: -1.49
PENN - DARTMOUTH: 8.13
PENN - COLUMBIA: -4.94
PENN - CORNELL: -11.06
PENN - YALE: -11.45
PENN - BROWN: 0.16
DARTMOUTH - COLUMBIA: -13.07
DARTMOUTH - CORNELL: -19.19
DARTMOUTH - YALE: -19.58
DARTMOUTH - BROWN: -7.97
COLUMBIA - CORNELL: -6.11
COLUMBIA - YALE: -6.51
COLUMBIA - BROWN: 5.1
CORNELL - YALE: -0.39
CORNELL - BROWN: 11.21
YALE - BROWN: 11.61</code></pre>
</div>
</div>
<p>When backtesting our model, we can see that the predicted results not accurate. For the missing games, the same teams faced each other twice and I took the average and compared it to the predicted. The predicted between Harvard and Dartmouth was extremely off whereas the predicted between Harvard and Cornell were quite close.</p>
<div class="cell" data-execution_count="18">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>predicted <span class="op">=</span> pd.read_csv(<span class="st">"/Users/zheng/Downloads/UChicago/Sophomore Year/Applications in Linear Algebra/project2/2023-2024 Ivy Conference Games - Sheet2.csv"</span>).set_index(<span class="st">"DIFFERENCE"</span>)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>display(predicted)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">GAME 1</th>
<th data-quarto-table-cell-role="th">GAME 2</th>
<th data-quarto-table-cell-role="th">AVG</th>
<th data-quarto-table-cell-role="th">PREDICTED</th>
<th data-quarto-table-cell-role="th">ERROR</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">DIFFERENCE</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">HARVARD - DARTMOUTH</td>
<td>18</td>
<td>-17</td>
<td>0.5</td>
<td>6.48</td>
<td>1196.00%</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">HARVARD - CORNELL</td>
<td>-13</td>
<td>-13</td>
<td>-13.0</td>
<td>-12.70</td>
<td>-2.31%</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">YALE - PENN</td>
<td>16</td>
<td>14</td>
<td>15.0</td>
<td>11.45</td>
<td>-23.67%</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">YALE - CORNELL</td>
<td>2</td>
<td>-13</td>
<td>-5.5</td>
<td>0.39</td>
<td>-107.09%</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">COLUMBIA - BROWN</td>
<td>14</td>
<td>-2</td>
<td>6.0</td>
<td>5.10</td>
<td>-15.00%</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>These results obviously show that this model is not sufficent. A simple way to increase accuracy is by increasing the games sampled. However, this is still difficult as these teams play each other twice every season (year) so we’d have to sample across years. Doing that will introduce more factors such as the players graduating and leaving the team or the team getting new players.</p>
<p>Predicting the outcomes of games are very popular and can get very sophisticated, mostly because of the monetary gain on betting platforms. One can use a more complicated model such as forest algorithms and deep learning.</p>
<!-- -->

</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb28" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Project 2"</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Vincent Zheng"</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> 5/5/2024"</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="an">latex-auto-mk:</span><span class="co"> true</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> pdf_document</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: show</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: </span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="co">      source: true</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="co">      toggle: true</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sympy <span class="im">as</span> sp</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> networkx <span class="im">as</span> nx</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> PIL <span class="im">import</span> Image</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.linalg <span class="im">import</span> norm</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.linalg <span class="im">import</span> lstsq</span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.sparse <span class="im">import</span> csr_matrix</span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a><span class="fu"># Modeling with Directed Graphs</span></span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a>Here, I first create a picture of the digraph with the given nodes and edges. </span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true" tabindex="-1"></a><span class="co"># drawing diagraph</span></span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-39"><a href="#cb28-39" aria-hidden="true" tabindex="-1"></a>nodes <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]</span>
<span id="cb28-40"><a href="#cb28-40" aria-hidden="true" tabindex="-1"></a>edges <span class="op">=</span> [[<span class="dv">1</span>,<span class="dv">2</span>], [<span class="dv">2</span>,<span class="dv">3</span>], [<span class="dv">3</span>,<span class="dv">4</span>], [<span class="dv">4</span>,<span class="dv">2</span>], [<span class="dv">1</span>,<span class="dv">4</span>], [<span class="dv">3</span>,<span class="dv">1</span>], [<span class="dv">3</span>,<span class="dv">6</span>], [<span class="dv">6</span>,<span class="dv">3</span>], [<span class="dv">4</span>,<span class="dv">5</span>], [<span class="dv">5</span>,<span class="dv">6</span>]]</span>
<span id="cb28-41"><a href="#cb28-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-42"><a href="#cb28-42" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> nx.DiGraph() </span>
<span id="cb28-43"><a href="#cb28-43" aria-hidden="true" tabindex="-1"></a>G.add_nodes_from(nodes)</span>
<span id="cb28-44"><a href="#cb28-44" aria-hidden="true" tabindex="-1"></a>G.add_edges_from(edges)</span>
<span id="cb28-45"><a href="#cb28-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-46"><a href="#cb28-46" aria-hidden="true" tabindex="-1"></a>layout <span class="op">=</span> nx.shell_layout(G) </span>
<span id="cb28-47"><a href="#cb28-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-48"><a href="#cb28-48" aria-hidden="true" tabindex="-1"></a>nx.draw(G, layout, with_labels<span class="op">=</span><span class="va">True</span>, node_size <span class="op">=</span> <span class="dv">5000</span>, node_color <span class="op">=</span> <span class="st">'lightblue'</span>, font_size <span class="op">=</span> <span class="dv">20</span>, font_color <span class="op">=</span> <span class="st">'black'</span>, connectionstyle <span class="op">=</span> <span class="st">'arc3, rad = 0.1'</span>)</span>
<span id="cb28-49"><a href="#cb28-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-50"><a href="#cb28-50" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-51"><a href="#cb28-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-52"><a href="#cb28-52" aria-hidden="true" tabindex="-1"></a>Then, I create the incidence matrix of the digraph which is done by filling a matrix with -1 at the ith row of the xth edge if it's leaving the ith node and a 1 at the jth row of the xth edge if it's leavin the jth node. For example, the first column has -1 at the first row and 1 at the 2th row since the first edge is leaving node 1 and entering node 2.</span>
<span id="cb28-53"><a href="#cb28-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-56"><a href="#cb28-56" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb28-57"><a href="#cb28-57" aria-hidden="true" tabindex="-1"></a><span class="co"># incidence matrix</span></span>
<span id="cb28-58"><a href="#cb28-58" aria-hidden="true" tabindex="-1"></a>incidence <span class="op">=</span> nx.incidence_matrix(G, oriented<span class="op">=</span><span class="va">True</span>) </span>
<span id="cb28-59"><a href="#cb28-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-60"><a href="#cb28-60" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> sp.Matrix(incidence.toarray())</span>
<span id="cb28-61"><a href="#cb28-61" aria-hidden="true" tabindex="-1"></a>display(A)</span>
<span id="cb28-62"><a href="#cb28-62" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-63"><a href="#cb28-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-66"><a href="#cb28-66" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb28-67"><a href="#cb28-67" aria-hidden="true" tabindex="-1"></a><span class="co"># rref form of A</span></span>
<span id="cb28-68"><a href="#cb28-68" aria-hidden="true" tabindex="-1"></a>A_rref <span class="op">=</span> A.rref()</span>
<span id="cb28-69"><a href="#cb28-69" aria-hidden="true" tabindex="-1"></a>display(A_rref)</span>
<span id="cb28-70"><a href="#cb28-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-71"><a href="#cb28-71" aria-hidden="true" tabindex="-1"></a><span class="co"># basis for the null space of A</span></span>
<span id="cb28-72"><a href="#cb28-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-73"><a href="#cb28-73" aria-hidden="true" tabindex="-1"></a>A_nullspace <span class="op">=</span> A.nullspace()</span>
<span id="cb28-74"><a href="#cb28-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-75"><a href="#cb28-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-76"><a href="#cb28-76" aria-hidden="true" tabindex="-1"></a><span class="co"># basis for algebraic loop</span></span>
<span id="cb28-77"><a href="#cb28-77" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> A_nullspace:</span>
<span id="cb28-78"><a href="#cb28-78" aria-hidden="true" tabindex="-1"></a>    display(i)</span>
<span id="cb28-79"><a href="#cb28-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-80"><a href="#cb28-80" aria-hidden="true" tabindex="-1"></a><span class="co"># tweaking to get basis for geometric loop</span></span>
<span id="cb28-81"><a href="#cb28-81" aria-hidden="true" tabindex="-1"></a>A_geometric <span class="op">=</span> A_nullspace.copy()</span>
<span id="cb28-82"><a href="#cb28-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-83"><a href="#cb28-83" aria-hidden="true" tabindex="-1"></a>A_geometric[<span class="dv">0</span>] <span class="op">=</span> A_nullspace[<span class="dv">0</span>] <span class="op">+</span> A_nullspace[<span class="dv">2</span>]</span>
<span id="cb28-84"><a href="#cb28-84" aria-hidden="true" tabindex="-1"></a>A_geometric[<span class="dv">2</span>] <span class="op">=</span> A_nullspace[<span class="dv">1</span>] <span class="op">+</span> A_nullspace[<span class="dv">2</span>]</span>
<span id="cb28-85"><a href="#cb28-85" aria-hidden="true" tabindex="-1"></a>A_geometric[<span class="dv">3</span>] <span class="op">=</span> A_nullspace[<span class="dv">1</span>] <span class="op">+</span> A_nullspace[<span class="dv">4</span>] <span class="op">+</span> A_nullspace[<span class="dv">3</span>]</span>
<span id="cb28-86"><a href="#cb28-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-87"><a href="#cb28-87" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Basis for geometric loop"</span>)</span>
<span id="cb28-88"><a href="#cb28-88" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> A_geometric:</span>
<span id="cb28-89"><a href="#cb28-89" aria-hidden="true" tabindex="-1"></a>    display(i)</span>
<span id="cb28-90"><a href="#cb28-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-91"><a href="#cb28-91" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-92"><a href="#cb28-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-93"><a href="#cb28-93" aria-hidden="true" tabindex="-1"></a><span class="fu">## 1. </span></span>
<span id="cb28-94"><a href="#cb28-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-95"><a href="#cb28-95" aria-hidden="true" tabindex="-1"></a>I'm taking A to be equal to the tranpose of the A used before, to say that Ax is the vector of potential differences across the circuit.</span>
<span id="cb28-96"><a href="#cb28-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-97"><a href="#cb28-97" aria-hidden="true" tabindex="-1"></a>If the vector of potential differences, b satisfies Ax = b, then b is in the column space of A. </span>
<span id="cb28-98"><a href="#cb28-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-99"><a href="#cb28-99" aria-hidden="true" tabindex="-1"></a>If we take the vector y as a vector in the span of the basis of the nullspace of A, which is the algebraic loop, we know that yT<span class="sc">\*</span>A = 0. </span>
<span id="cb28-100"><a href="#cb28-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-101"><a href="#cb28-101" aria-hidden="true" tabindex="-1"></a>We also know that Ax = b gives yT<span class="sc">\*</span>A<span class="sc">\*</span>x = yT<span class="sc">\*</span>b and now we've shown that yT<span class="sc">\*</span>b = 0. yT<span class="sc">\*</span>b is the sum of the potential differences across a circuit which we've shown to be 0, proving Kirchhoff's first law.</span>
<span id="cb28-102"><a href="#cb28-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-103"><a href="#cb28-103" aria-hidden="true" tabindex="-1"></a>Thus, the condition must be that b is in the column space of A.</span>
<span id="cb28-104"><a href="#cb28-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-105"><a href="#cb28-105" aria-hidden="true" tabindex="-1"></a>If one takes takes the transpose of the current incidence matrix and multiply it by the potentials of each node, we get:</span>
<span id="cb28-106"><a href="#cb28-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-109"><a href="#cb28-109" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb28-110"><a href="#cb28-110" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> A.transpose()</span>
<span id="cb28-111"><a href="#cb28-111" aria-hidden="true" tabindex="-1"></a>display(B)</span>
<span id="cb28-112"><a href="#cb28-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-113"><a href="#cb28-113" aria-hidden="true" tabindex="-1"></a>x1, x2, x3, x4, x5, x6 <span class="op">=</span> sp.symbols(<span class="st">'x1 x2 x3 x4 x5 x6'</span>)</span>
<span id="cb28-114"><a href="#cb28-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-115"><a href="#cb28-115" aria-hidden="true" tabindex="-1"></a>v <span class="op">=</span> sp.Matrix([x1, x2, x3, x4, x5, x6])</span>
<span id="cb28-116"><a href="#cb28-116" aria-hidden="true" tabindex="-1"></a>display(v)</span>
<span id="cb28-117"><a href="#cb28-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-118"><a href="#cb28-118" aria-hidden="true" tabindex="-1"></a>Bv <span class="op">=</span> B <span class="op">*</span> v</span>
<span id="cb28-119"><a href="#cb28-119" aria-hidden="true" tabindex="-1"></a>Bv</span>
<span id="cb28-120"><a href="#cb28-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-121"><a href="#cb28-121" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-122"><a href="#cb28-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-123"><a href="#cb28-123" aria-hidden="true" tabindex="-1"></a><span class="fu">## 2.</span></span>
<span id="cb28-124"><a href="#cb28-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-125"><a href="#cb28-125" aria-hidden="true" tabindex="-1"></a>Kirchhoff’s first law of circuits says that the total flow of current in and out of any node should be 0 which means that the sum of the rows of the incidence matrix should be 0. It's also given that the sum of the columns of the incidence matrix is 0 because the current flowing out of one node into the other node is the same.</span>
<span id="cb28-126"><a href="#cb28-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-127"><a href="#cb28-127" aria-hidden="true" tabindex="-1"></a>Below shows a digraph with weights that follows Kirchhoff's first law. </span>
<span id="cb28-128"><a href="#cb28-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-129"><a href="#cb28-129" aria-hidden="true" tabindex="-1"></a>Note that the weight is for an edge is located on the tail of the edge. Sorry if it's not clear - I spent a lot of time figuring out the labels but apparently networkx doesn't support labels with an arc and I need the arc to differentiate the 2 edges between 6 and 3.</span>
<span id="cb28-130"><a href="#cb28-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-133"><a href="#cb28-133" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb28-134"><a href="#cb28-134" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> nx.DiGraph(Directed<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb28-135"><a href="#cb28-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-136"><a href="#cb28-136" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">1</span> , <span class="dv">2</span> , weight<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb28-137"><a href="#cb28-137" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">2</span> , <span class="dv">3</span> , weight<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb28-138"><a href="#cb28-138" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">3</span> , <span class="dv">4</span> , weight<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb28-139"><a href="#cb28-139" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">4</span> , <span class="dv">2</span> , weight<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb28-140"><a href="#cb28-140" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">1</span> , <span class="dv">4</span> , weight<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb28-141"><a href="#cb28-141" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">3</span> , <span class="dv">1</span> , weight<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb28-142"><a href="#cb28-142" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">3</span> , <span class="dv">6</span> , weight<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb28-143"><a href="#cb28-143" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">6</span> , <span class="dv">3</span> , weight<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb28-144"><a href="#cb28-144" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">4</span> , <span class="dv">5</span> , weight<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb28-145"><a href="#cb28-145" aria-hidden="true" tabindex="-1"></a>G.add_edge( <span class="dv">5</span> , <span class="dv">6</span> , weight<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb28-146"><a href="#cb28-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-147"><a href="#cb28-147" aria-hidden="true" tabindex="-1"></a><span class="co"># layout </span></span>
<span id="cb28-148"><a href="#cb28-148" aria-hidden="true" tabindex="-1"></a>pos <span class="op">=</span> nx.shell_layout(G) </span>
<span id="cb28-149"><a href="#cb28-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-150"><a href="#cb28-150" aria-hidden="true" tabindex="-1"></a><span class="co"># nodes</span></span>
<span id="cb28-151"><a href="#cb28-151" aria-hidden="true" tabindex="-1"></a><span class="co"># nx.draw_networkx_nodes(G, pos, node_size=5000, node_color="lightblue")</span></span>
<span id="cb28-152"><a href="#cb28-152" aria-hidden="true" tabindex="-1"></a>nx.draw(G, pos, node_size<span class="op">=</span><span class="dv">5000</span>, node_color<span class="op">=</span><span class="st">"lightblue"</span>, with_labels <span class="op">=</span> <span class="va">True</span>, connectionstyle<span class="op">=</span><span class="st">'arc3, rad = 0.1'</span>)</span>
<span id="cb28-153"><a href="#cb28-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-154"><a href="#cb28-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-155"><a href="#cb28-155" aria-hidden="true" tabindex="-1"></a><span class="co"># edges</span></span>
<span id="cb28-156"><a href="#cb28-156" aria-hidden="true" tabindex="-1"></a><span class="co"># nx.draw_networkx_edges(G, pos, edgelist = edge_labels)</span></span>
<span id="cb28-157"><a href="#cb28-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-158"><a href="#cb28-158" aria-hidden="true" tabindex="-1"></a><span class="co"># node labels</span></span>
<span id="cb28-159"><a href="#cb28-159" aria-hidden="true" tabindex="-1"></a><span class="co"># nx.draw_networkx_labels(G, pos, font_size=20)</span></span>
<span id="cb28-160"><a href="#cb28-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-161"><a href="#cb28-161" aria-hidden="true" tabindex="-1"></a><span class="co"># edge weight labels</span></span>
<span id="cb28-162"><a href="#cb28-162" aria-hidden="true" tabindex="-1"></a>edge_labels <span class="op">=</span> nx.get_edge_attributes(G, <span class="st">"weight"</span>)</span>
<span id="cb28-163"><a href="#cb28-163" aria-hidden="true" tabindex="-1"></a>nx.draw_networkx_edge_labels(G, pos, edge_labels, label_pos<span class="op">=</span><span class="fl">0.75</span>)</span>
<span id="cb28-164"><a href="#cb28-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-165"><a href="#cb28-165" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> plt.gca()</span>
<span id="cb28-166"><a href="#cb28-166" aria-hidden="true" tabindex="-1"></a>ax.margins(<span class="fl">0.08</span>)</span>
<span id="cb28-167"><a href="#cb28-167" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">"off"</span>)</span>
<span id="cb28-168"><a href="#cb28-168" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb28-169"><a href="#cb28-169" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb28-170"><a href="#cb28-170" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-171"><a href="#cb28-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-172"><a href="#cb28-172" aria-hidden="true" tabindex="-1"></a><span class="fu">## 3.</span></span>
<span id="cb28-173"><a href="#cb28-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-174"><a href="#cb28-174" aria-hidden="true" tabindex="-1"></a>Since we know that the basis tells us the edges that create a loop, that means the the nodes correspond to the edges can create a loop. Building from this, two basis vectors if they have a common edge (i.e. contains a 1 at the same element), then these vectors form a bigger loop where every node in the loop can communicate with every other node in the loop. For example, the basis vectors <span class="co">[</span><span class="ot">1, 0, 1, 0, 1, 0, 0, 0, 0, 0</span><span class="co">]</span> and <span class="co">[</span><span class="ot">0, 0, 1, 1, 0, 0, 1, 0, 0, 0</span><span class="co">]</span> has e3 as a common edge. This basically creates a loop with vector <span class="co">[</span><span class="ot">1, 0 , 1, 1, 1, 0, 1, 0, 0, 0</span><span class="co">]</span>. This reiterates which allows us to see that every node in our digraph can communicate with every other node. </span>
<span id="cb28-175"><a href="#cb28-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-176"><a href="#cb28-176" aria-hidden="true" tabindex="-1"></a>One way to see this is is to consider the loop 3-4-5-6-3 and 1-2-3-1. Since the two loops have node 3 in common, any node in a loop can communicate with any other node in the other loop through node 3.</span>
<span id="cb28-177"><a href="#cb28-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-178"><a href="#cb28-178" aria-hidden="true" tabindex="-1"></a><span class="fu"># Image Compression and Edge Detection</span></span>
<span id="cb28-179"><a href="#cb28-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-180"><a href="#cb28-180" aria-hidden="true" tabindex="-1"></a>I picked Vincent van Gogh's Starry Night as the image and the grayscale version of the image is shown below.</span>
<span id="cb28-181"><a href="#cb28-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-184"><a href="#cb28-184" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb28-185"><a href="#cb28-185" aria-hidden="true" tabindex="-1"></a><span class="co"># original image</span></span>
<span id="cb28-186"><a href="#cb28-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-187"><a href="#cb28-187" aria-hidden="true" tabindex="-1"></a>fname <span class="op">=</span> <span class="st">'/Users/zheng/Downloads/UChicago/Sophomore Year/Applications in Linear Algebra/project2/image.png'</span></span>
<span id="cb28-188"><a href="#cb28-188" aria-hidden="true" tabindex="-1"></a>image <span class="op">=</span> Image.<span class="bu">open</span>(fname).convert(<span class="st">"L"</span>)</span>
<span id="cb28-189"><a href="#cb28-189" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> np.asarray(image)</span>
<span id="cb28-190"><a href="#cb28-190" aria-hidden="true" tabindex="-1"></a>plt.imshow(arr, cmap<span class="op">=</span><span class="st">'gray'</span>, aspect <span class="op">=</span> <span class="st">'auto'</span>)</span>
<span id="cb28-191"><a href="#cb28-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-192"><a href="#cb28-192" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-193"><a href="#cb28-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-194"><a href="#cb28-194" aria-hidden="true" tabindex="-1"></a>I first created the haar wavelet transform matrix which is applied to the image to create four quadrants, one of which is the blurry quadrant and the rest gives us the horizontal, vertical, and diagonal edges. One can see that the blurry quadrant is quite similar to the original after one iteration.</span>
<span id="cb28-195"><a href="#cb28-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-198"><a href="#cb28-198" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb28-199"><a href="#cb28-199" aria-hidden="true" tabindex="-1"></a><span class="co"># haar wavelet transform matrix</span></span>
<span id="cb28-200"><a href="#cb28-200" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math </span>
<span id="cb28-201"><a href="#cb28-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-202"><a href="#cb28-202" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> haar(n):</span>
<span id="cb28-203"><a href="#cb28-203" aria-hidden="true" tabindex="-1"></a>  count <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb28-204"><a href="#cb28-204" aria-hidden="true" tabindex="-1"></a>  U <span class="op">=</span> np.zeros((<span class="bu">int</span>(n<span class="op">/</span><span class="dv">2</span>),n)) </span>
<span id="cb28-205"><a href="#cb28-205" aria-hidden="true" tabindex="-1"></a>  <span class="co"># U</span></span>
<span id="cb28-206"><a href="#cb28-206" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> i <span class="kw">in</span> np.arange(<span class="dv">0</span>,<span class="bu">len</span>(U)):</span>
<span id="cb28-207"><a href="#cb28-207" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(U[i])):</span>
<span id="cb28-208"><a href="#cb28-208" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> j <span class="op">==</span> count <span class="kw">or</span> j <span class="op">==</span> count <span class="op">+</span> <span class="dv">1</span>:</span>
<span id="cb28-209"><a href="#cb28-209" aria-hidden="true" tabindex="-1"></a>        U[i][j] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb28-210"><a href="#cb28-210" aria-hidden="true" tabindex="-1"></a>    count <span class="op">+=</span> <span class="dv">2</span></span>
<span id="cb28-211"><a href="#cb28-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-212"><a href="#cb28-212" aria-hidden="true" tabindex="-1"></a>  <span class="co"># V</span></span>
<span id="cb28-213"><a href="#cb28-213" aria-hidden="true" tabindex="-1"></a>  count <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb28-214"><a href="#cb28-214" aria-hidden="true" tabindex="-1"></a>  V <span class="op">=</span> np.zeros((<span class="bu">int</span>(n<span class="op">/</span><span class="dv">2</span>),n))</span>
<span id="cb28-215"><a href="#cb28-215" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> i <span class="kw">in</span> np.arange(<span class="dv">0</span>,<span class="bu">len</span>(V)):</span>
<span id="cb28-216"><a href="#cb28-216" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(V[i])):</span>
<span id="cb28-217"><a href="#cb28-217" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> j <span class="op">==</span> count:</span>
<span id="cb28-218"><a href="#cb28-218" aria-hidden="true" tabindex="-1"></a>        V[i][j] <span class="op">=</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb28-219"><a href="#cb28-219" aria-hidden="true" tabindex="-1"></a>      <span class="cf">elif</span> j <span class="op">==</span> count <span class="op">+</span> <span class="dv">1</span>:</span>
<span id="cb28-220"><a href="#cb28-220" aria-hidden="true" tabindex="-1"></a>        V[i][j] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb28-221"><a href="#cb28-221" aria-hidden="true" tabindex="-1"></a>    count <span class="op">+=</span> <span class="dv">2</span></span>
<span id="cb28-222"><a href="#cb28-222" aria-hidden="true" tabindex="-1"></a>  <span class="co"># W</span></span>
<span id="cb28-223"><a href="#cb28-223" aria-hidden="true" tabindex="-1"></a>  W <span class="op">=</span> np.concatenate((U, V), axis<span class="op">=</span><span class="dv">0</span>) <span class="op">*</span> math.sqrt(<span class="dv">2</span>) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb28-224"><a href="#cb28-224" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> W</span>
<span id="cb28-225"><a href="#cb28-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-226"><a href="#cb28-226" aria-hidden="true" tabindex="-1"></a><span class="co"># applying haar wavelet transform</span></span>
<span id="cb28-227"><a href="#cb28-227" aria-hidden="true" tabindex="-1"></a>m, n <span class="op">=</span> arr.shape</span>
<span id="cb28-228"><a href="#cb28-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-229"><a href="#cb28-229" aria-hidden="true" tabindex="-1"></a>Wm <span class="op">=</span> haar(m) </span>
<span id="cb28-230"><a href="#cb28-230" aria-hidden="true" tabindex="-1"></a>Wn <span class="op">=</span> haar(n)</span>
<span id="cb28-231"><a href="#cb28-231" aria-hidden="true" tabindex="-1"></a>Wnt <span class="op">=</span> Wn.transpose()</span>
<span id="cb28-232"><a href="#cb28-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-233"><a href="#cb28-233" aria-hidden="true" tabindex="-1"></a>test <span class="op">=</span> np.dot(arr, Wnt)</span>
<span id="cb28-234"><a href="#cb28-234" aria-hidden="true" tabindex="-1"></a>test <span class="op">=</span> np.dot(Wm, test) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb28-235"><a href="#cb28-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-236"><a href="#cb28-236" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2, ax3) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">3</span>, figsize <span class="op">=</span> (<span class="dv">12</span><span class="op">*</span><span class="fl">1.25</span>, <span class="dv">3</span><span class="op">*</span><span class="fl">1.25</span>))</span>
<span id="cb28-237"><a href="#cb28-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-238"><a href="#cb28-238" aria-hidden="true" tabindex="-1"></a><span class="co"># four quadrants</span></span>
<span id="cb28-239"><a href="#cb28-239" aria-hidden="true" tabindex="-1"></a>ax1.imshow(test, cmap<span class="op">=</span><span class="st">"gray"</span>, aspect <span class="op">=</span> <span class="st">'auto'</span>)</span>
<span id="cb28-240"><a href="#cb28-240" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">"four quadrants"</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb28-241"><a href="#cb28-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-242"><a href="#cb28-242" aria-hidden="true" tabindex="-1"></a><span class="co"># blurry quadrant</span></span>
<span id="cb28-243"><a href="#cb28-243" aria-hidden="true" tabindex="-1"></a>blurry <span class="op">=</span> test[<span class="dv">0</span>:<span class="bu">int</span>(m<span class="op">/</span><span class="dv">2</span>), <span class="dv">0</span>:<span class="bu">int</span>(n<span class="op">/</span><span class="dv">2</span>)]</span>
<span id="cb28-244"><a href="#cb28-244" aria-hidden="true" tabindex="-1"></a>ax2.imshow(blurry, cmap<span class="op">=</span><span class="st">"gray"</span>, aspect <span class="op">=</span> <span class="st">'auto'</span>)</span>
<span id="cb28-245"><a href="#cb28-245" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">"blurry quadrant"</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb28-246"><a href="#cb28-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-247"><a href="#cb28-247" aria-hidden="true" tabindex="-1"></a><span class="co"># original</span></span>
<span id="cb28-248"><a href="#cb28-248" aria-hidden="true" tabindex="-1"></a>ax3.imshow(arr, cmap<span class="op">=</span><span class="st">"gray"</span>, aspect <span class="op">=</span> <span class="st">'auto'</span>)</span>
<span id="cb28-249"><a href="#cb28-249" aria-hidden="true" tabindex="-1"></a>ax3.set_title(<span class="st">"original"</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb28-250"><a href="#cb28-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-251"><a href="#cb28-251" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb28-252"><a href="#cb28-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-253"><a href="#cb28-253" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-254"><a href="#cb28-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-255"><a href="#cb28-255" aria-hidden="true" tabindex="-1"></a>Just to check, I applied the inverse of the Haar wavelet transform to the four quadrants and multipled by two to regain my original image. To check that it's the same image, I calculated the norm of the difference between the original and the image after the inverse Haar wavelet transform.</span>
<span id="cb28-256"><a href="#cb28-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-259"><a href="#cb28-259" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb28-260"><a href="#cb28-260" aria-hidden="true" tabindex="-1"></a>test_orig <span class="op">=</span> np.dot(test, Wn)</span>
<span id="cb28-261"><a href="#cb28-261" aria-hidden="true" tabindex="-1"></a>test_orig <span class="op">=</span> np.dot(Wm.transpose(), test_orig) <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb28-262"><a href="#cb28-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-263"><a href="#cb28-263" aria-hidden="true" tabindex="-1"></a>plt.imshow(test_orig, cmap<span class="op">=</span><span class="st">'gray'</span>, aspect <span class="op">=</span> <span class="st">'auto'</span>)</span>
<span id="cb28-264"><a href="#cb28-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-265"><a href="#cb28-265" aria-hidden="true" tabindex="-1"></a>dif <span class="op">=</span> test_orig <span class="op">-</span> arr</span>
<span id="cb28-266"><a href="#cb28-266" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"norm: </span><span class="sc">{</span>norm(dif)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb28-267"><a href="#cb28-267" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-268"><a href="#cb28-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-269"><a href="#cb28-269" aria-hidden="true" tabindex="-1"></a>After trying various iterations, I've decided that 4 iterations of the Haar wavelet transform still retains the image well enough while compressing it. At this stage, one can still recognize his piece but after the 4th iteration, the image becomes too blurry.</span>
<span id="cb28-270"><a href="#cb28-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-273"><a href="#cb28-273" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb28-274"><a href="#cb28-274" aria-hidden="true" tabindex="-1"></a>iterations <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb28-275"><a href="#cb28-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-276"><a href="#cb28-276" aria-hidden="true" tabindex="-1"></a>iter0 <span class="op">=</span> arr.copy()</span>
<span id="cb28-277"><a href="#cb28-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-278"><a href="#cb28-278" aria-hidden="true" tabindex="-1"></a>titles <span class="op">=</span> [<span class="st">"3rd iteration"</span>, <span class="st">"4th iteration"</span>, <span class="st">"5th iteration"</span>]</span>
<span id="cb28-279"><a href="#cb28-279" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span><span class="op">*</span><span class="fl">1.25</span>, <span class="dv">3</span><span class="op">*</span><span class="fl">1.25</span>))</span>
<span id="cb28-280"><a href="#cb28-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-281"><a href="#cb28-281" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(<span class="dv">1</span>, iterations <span class="op">+</span> <span class="dv">1</span>, <span class="dv">1</span>):</span>
<span id="cb28-282"><a href="#cb28-282" aria-hidden="true" tabindex="-1"></a>  <span class="co"># creating haar matrix</span></span>
<span id="cb28-283"><a href="#cb28-283" aria-hidden="true" tabindex="-1"></a>  m, n <span class="op">=</span> iter0.shape</span>
<span id="cb28-284"><a href="#cb28-284" aria-hidden="true" tabindex="-1"></a>  Wm <span class="op">=</span> haar(m) </span>
<span id="cb28-285"><a href="#cb28-285" aria-hidden="true" tabindex="-1"></a>  Wn <span class="op">=</span> haar(n)</span>
<span id="cb28-286"><a href="#cb28-286" aria-hidden="true" tabindex="-1"></a>  Wnt <span class="op">=</span> Wn.transpose()</span>
<span id="cb28-287"><a href="#cb28-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-288"><a href="#cb28-288" aria-hidden="true" tabindex="-1"></a>  <span class="co"># multiplying to get the four quadrants</span></span>
<span id="cb28-289"><a href="#cb28-289" aria-hidden="true" tabindex="-1"></a>  iter1 <span class="op">=</span> np.dot(iter0, Wnt)</span>
<span id="cb28-290"><a href="#cb28-290" aria-hidden="true" tabindex="-1"></a>  iter1 <span class="op">=</span> np.dot(Wm, iter1) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb28-291"><a href="#cb28-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-292"><a href="#cb28-292" aria-hidden="true" tabindex="-1"></a>  <span class="co"># keeping the blurry quadrant</span></span>
<span id="cb28-293"><a href="#cb28-293" aria-hidden="true" tabindex="-1"></a>  iter0 <span class="op">=</span> iter1[<span class="dv">0</span>:<span class="bu">int</span>(m<span class="op">/</span><span class="dv">2</span>), <span class="dv">0</span>:<span class="bu">int</span>(n<span class="op">/</span><span class="dv">2</span>)]</span>
<span id="cb28-294"><a href="#cb28-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-295"><a href="#cb28-295" aria-hidden="true" tabindex="-1"></a>  <span class="co"># display</span></span>
<span id="cb28-296"><a href="#cb28-296" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> i <span class="op">&gt;=</span> iterations <span class="op">-</span> <span class="dv">2</span> <span class="kw">and</span> i <span class="op">&lt;=</span> iterations:</span>
<span id="cb28-297"><a href="#cb28-297" aria-hidden="true" tabindex="-1"></a>    ax <span class="op">=</span> fig.add_subplot(<span class="dv">1</span>, <span class="dv">3</span>, i <span class="op">-</span> <span class="dv">2</span>)</span>
<span id="cb28-298"><a href="#cb28-298" aria-hidden="true" tabindex="-1"></a>    ax.imshow(iter0, cmap<span class="op">=</span><span class="st">"gray"</span>, aspect <span class="op">=</span> <span class="st">'auto'</span>)</span>
<span id="cb28-299"><a href="#cb28-299" aria-hidden="true" tabindex="-1"></a>    ax.set_title(titles[i<span class="op">-</span><span class="dv">3</span>], fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb28-300"><a href="#cb28-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-301"><a href="#cb28-301" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb28-302"><a href="#cb28-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-303"><a href="#cb28-303" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-304"><a href="#cb28-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-305"><a href="#cb28-305" aria-hidden="true" tabindex="-1"></a>Another way to compress the image is by taking the edges from the result of the haar wavelet transform and applying a threshold that sets all pixels that are below the threshold to black (0). Shown below is the reconstructed image after applying a threshold of 15.</span>
<span id="cb28-306"><a href="#cb28-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-309"><a href="#cb28-309" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb28-310"><a href="#cb28-310" aria-hidden="true" tabindex="-1"></a>threshold <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb28-311"><a href="#cb28-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-312"><a href="#cb28-312" aria-hidden="true" tabindex="-1"></a>edge <span class="op">=</span> test.copy()</span>
<span id="cb28-313"><a href="#cb28-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-314"><a href="#cb28-314" aria-hidden="true" tabindex="-1"></a><span class="co"># removing the blurry quadrant</span></span>
<span id="cb28-315"><a href="#cb28-315" aria-hidden="true" tabindex="-1"></a>edge[<span class="dv">0</span>:<span class="bu">int</span>(m<span class="op">/</span><span class="dv">2</span>), <span class="dv">0</span>:<span class="bu">int</span>(n<span class="op">/</span><span class="dv">2</span>)] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb28-316"><a href="#cb28-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-317"><a href="#cb28-317" aria-hidden="true" tabindex="-1"></a><span class="co"># applying threshold</span></span>
<span id="cb28-318"><a href="#cb28-318" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(edge)):</span>
<span id="cb28-319"><a href="#cb28-319" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(edge[i])):</span>
<span id="cb28-320"><a href="#cb28-320" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> edge[i][j] <span class="op">&lt;</span> threshold:</span>
<span id="cb28-321"><a href="#cb28-321" aria-hidden="true" tabindex="-1"></a>      edge[i][j] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb28-322"><a href="#cb28-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-323"><a href="#cb28-323" aria-hidden="true" tabindex="-1"></a><span class="co"># percent of black pixels (to check code is working)</span></span>
<span id="cb28-324"><a href="#cb28-324" aria-hidden="true" tabindex="-1"></a>np.count_nonzero(edge<span class="op">==</span><span class="dv">0</span>)<span class="op">/</span>(<span class="dv">544</span><span class="op">*</span><span class="dv">700</span>)</span>
<span id="cb28-325"><a href="#cb28-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-326"><a href="#cb28-326" aria-hidden="true" tabindex="-1"></a><span class="co"># putting back the blurry quadrant</span></span>
<span id="cb28-327"><a href="#cb28-327" aria-hidden="true" tabindex="-1"></a>edge[<span class="dv">0</span>:<span class="bu">int</span>(m<span class="op">/</span><span class="dv">2</span>), <span class="dv">0</span>:<span class="bu">int</span>(n<span class="op">/</span><span class="dv">2</span>)] <span class="op">=</span> test[<span class="dv">0</span>:<span class="bu">int</span>(m<span class="op">/</span><span class="dv">2</span>), <span class="dv">0</span>:<span class="bu">int</span>(n<span class="op">/</span><span class="dv">2</span>)]</span>
<span id="cb28-328"><a href="#cb28-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-329"><a href="#cb28-329" aria-hidden="true" tabindex="-1"></a><span class="co"># getting back original image</span></span>
<span id="cb28-330"><a href="#cb28-330" aria-hidden="true" tabindex="-1"></a>m, n <span class="op">=</span> edge.shape</span>
<span id="cb28-331"><a href="#cb28-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-332"><a href="#cb28-332" aria-hidden="true" tabindex="-1"></a>Wm <span class="op">=</span> haar(m) </span>
<span id="cb28-333"><a href="#cb28-333" aria-hidden="true" tabindex="-1"></a>Wn <span class="op">=</span> haar(n)</span>
<span id="cb28-334"><a href="#cb28-334" aria-hidden="true" tabindex="-1"></a>Wmt <span class="op">=</span> Wm.transpose()</span>
<span id="cb28-335"><a href="#cb28-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-336"><a href="#cb28-336" aria-hidden="true" tabindex="-1"></a>edge_orig <span class="op">=</span> np.dot(edge, Wn)</span>
<span id="cb28-337"><a href="#cb28-337" aria-hidden="true" tabindex="-1"></a>edge_orig <span class="op">=</span> np.dot(Wmt, edge_orig) <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb28-338"><a href="#cb28-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-339"><a href="#cb28-339" aria-hidden="true" tabindex="-1"></a><span class="co"># plotting</span></span>
<span id="cb28-340"><a href="#cb28-340" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2, ax3) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">3</span>, figsize <span class="op">=</span> (<span class="dv">12</span><span class="op">*</span><span class="fl">1.25</span>, <span class="dv">3</span><span class="op">*</span><span class="fl">1.25</span>))</span>
<span id="cb28-341"><a href="#cb28-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-342"><a href="#cb28-342" aria-hidden="true" tabindex="-1"></a><span class="co"># four quadrants</span></span>
<span id="cb28-343"><a href="#cb28-343" aria-hidden="true" tabindex="-1"></a>ax1.imshow(edge, cmap<span class="op">=</span><span class="st">"gray"</span>, aspect <span class="op">=</span> <span class="st">'auto'</span>)</span>
<span id="cb28-344"><a href="#cb28-344" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">"four quadrants"</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb28-345"><a href="#cb28-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-346"><a href="#cb28-346" aria-hidden="true" tabindex="-1"></a><span class="co"># reconstructed</span></span>
<span id="cb28-347"><a href="#cb28-347" aria-hidden="true" tabindex="-1"></a>ax2.imshow(edge_orig, cmap<span class="op">=</span><span class="st">"gray"</span>, aspect <span class="op">=</span> <span class="st">'auto'</span>)</span>
<span id="cb28-348"><a href="#cb28-348" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">"reconstructed"</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb28-349"><a href="#cb28-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-350"><a href="#cb28-350" aria-hidden="true" tabindex="-1"></a><span class="co"># original</span></span>
<span id="cb28-351"><a href="#cb28-351" aria-hidden="true" tabindex="-1"></a>ax3.imshow(arr, cmap<span class="op">=</span><span class="st">"gray"</span>, aspect <span class="op">=</span> <span class="st">'auto'</span>)</span>
<span id="cb28-352"><a href="#cb28-352" aria-hidden="true" tabindex="-1"></a>ax3.set_title(<span class="st">"original"</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb28-353"><a href="#cb28-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-354"><a href="#cb28-354" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb28-355"><a href="#cb28-355" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-356"><a href="#cb28-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-357"><a href="#cb28-357" aria-hidden="true" tabindex="-1"></a>Although the restructed and original images look the same, one can check by taking the norm again and notice the vast difference from the previous norm.</span>
<span id="cb28-358"><a href="#cb28-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-361"><a href="#cb28-361" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb28-362"><a href="#cb28-362" aria-hidden="true" tabindex="-1"></a>dif <span class="op">=</span> edge_orig <span class="op">-</span> arr</span>
<span id="cb28-363"><a href="#cb28-363" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"norm: </span><span class="sc">{</span>norm(dif)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb28-364"><a href="#cb28-364" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-365"><a href="#cb28-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-366"><a href="#cb28-366" aria-hidden="true" tabindex="-1"></a>To compare the sizes of the arrays, I used np.array's data.nbytes to get the byte size of the arrays. Obviously, the blurry quadrant is 1/4 of the 4 quadrants but one can see hat the edge compressed recontructed image is almost the same proportion as the just the blurry quadrant while retaining information. </span>
<span id="cb28-367"><a href="#cb28-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-368"><a href="#cb28-368" aria-hidden="true" tabindex="-1"></a>Additionally, one would notice that the byte size of teh original image was significant smaller than the  compressed versions and I was confused so I did some research. I think it's because Pillow used more sophisticated compression techniques to compress the image when we read the image.</span>
<span id="cb28-369"><a href="#cb28-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-372"><a href="#cb28-372" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb28-373"><a href="#cb28-373" aria-hidden="true" tabindex="-1"></a><span class="co"># size of the original image</span></span>
<span id="cb28-374"><a href="#cb28-374" aria-hidden="true" tabindex="-1"></a>arr_size <span class="op">=</span> arr.data.nbytes</span>
<span id="cb28-375"><a href="#cb28-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-376"><a href="#cb28-376" aria-hidden="true" tabindex="-1"></a><span class="co"># size of the edge detected array</span></span>
<span id="cb28-377"><a href="#cb28-377" aria-hidden="true" tabindex="-1"></a>Sedge <span class="op">=</span> csr_matrix(edge)</span>
<span id="cb28-378"><a href="#cb28-378" aria-hidden="true" tabindex="-1"></a>sparse_size <span class="op">=</span> Sedge.data.nbytes</span>
<span id="cb28-379"><a href="#cb28-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-380"><a href="#cb28-380" aria-hidden="true" tabindex="-1"></a><span class="co"># size of the blurry image</span></span>
<span id="cb28-381"><a href="#cb28-381" aria-hidden="true" tabindex="-1"></a>blurry_size <span class="op">=</span> test[<span class="dv">0</span>:<span class="bu">int</span>(m<span class="op">/</span><span class="dv">2</span>), <span class="dv">0</span>:<span class="bu">int</span>(n<span class="op">/</span><span class="dv">2</span>)].data.nbytes</span>
<span id="cb28-382"><a href="#cb28-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-383"><a href="#cb28-383" aria-hidden="true" tabindex="-1"></a><span class="co"># size of the four quadrants</span></span>
<span id="cb28-384"><a href="#cb28-384" aria-hidden="true" tabindex="-1"></a>four_size <span class="op">=</span> test.data.nbytes</span>
<span id="cb28-385"><a href="#cb28-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-386"><a href="#cb28-386" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"byte size of the blurry quadrant: </span><span class="sc">{</span>blurry_size<span class="sc">}{</span><span class="st">"</span><span class="ch">\n</span><span class="st">"</span><span class="sc">}</span><span class="ss">byte size of CSR matrix: </span><span class="sc">{</span>sparse_size<span class="sc">}{</span><span class="st">"</span><span class="ch">\n</span><span class="st">"</span><span class="sc">}</span><span class="ss">byte size of original image: </span><span class="sc">{</span>arr_size<span class="sc">}{</span><span class="st">"</span><span class="ch">\n</span><span class="st">"</span><span class="sc">}</span><span class="ss">byte size of four quadrants: </span><span class="sc">{</span>four_size<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb28-387"><a href="#cb28-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-388"><a href="#cb28-388" aria-hidden="true" tabindex="-1"></a><span class="co"># proportions</span></span>
<span id="cb28-389"><a href="#cb28-389" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Proportion of the blurry quadrant: </span><span class="sc">{</span>blurry_size<span class="op">/</span>four_size<span class="sc">}{</span><span class="st">"</span><span class="ch">\n</span><span class="st">"</span><span class="sc">}</span><span class="ss">Proportion of the edge compressed image: </span><span class="sc">{</span>sparse_size<span class="op">/</span>four_size<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb28-390"><a href="#cb28-390" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-391"><a href="#cb28-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-392"><a href="#cb28-392" aria-hidden="true" tabindex="-1"></a><span class="fu"># Least Squares </span></span>
<span id="cb28-393"><a href="#cb28-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-394"><a href="#cb28-394" aria-hidden="true" tabindex="-1"></a>For my data set, I recorded results from the 2023-2024 Ivy League Conference Games. The data set is shown below.</span>
<span id="cb28-395"><a href="#cb28-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-398"><a href="#cb28-398" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb28-399"><a href="#cb28-399" aria-hidden="true" tabindex="-1"></a>games <span class="op">=</span> pd.read_csv(<span class="st">"/Users/zheng/Downloads/UChicago/Sophomore Year/Applications in Linear Algebra/project2/2023-2024 Ivy Conference Games - Sheet1.csv"</span>).set_index(<span class="st">"TEAMS"</span>)</span>
<span id="cb28-400"><a href="#cb28-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-401"><a href="#cb28-401" aria-hidden="true" tabindex="-1"></a>games</span>
<span id="cb28-402"><a href="#cb28-402" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-403"><a href="#cb28-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-404"><a href="#cb28-404" aria-hidden="true" tabindex="-1"></a>I first had to create the matrices and the vector b by calculating the differences for every game played.</span>
<span id="cb28-405"><a href="#cb28-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-408"><a href="#cb28-408" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb28-409"><a href="#cb28-409" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> [<span class="dv">31</span>,<span class="dv">7</span>,<span class="dv">18</span>,<span class="dv">8</span>,<span class="op">-</span><span class="dv">15</span>,<span class="op">-</span><span class="dv">6</span>,<span class="dv">9</span>,<span class="dv">9</span>,<span class="dv">3</span>,<span class="op">-</span><span class="dv">13</span>,<span class="op">-</span><span class="dv">2</span>,<span class="dv">29</span>,<span class="op">-</span><span class="dv">3</span>,<span class="op">-</span><span class="dv">17</span>,<span class="op">-</span><span class="dv">9</span>,<span class="op">-</span><span class="dv">16</span>,<span class="op">-</span><span class="dv">3</span>,<span class="op">-</span><span class="dv">24</span>,<span class="dv">4</span>,<span class="op">-</span><span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">10</span>]</span>
<span id="cb28-410"><a href="#cb28-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-411"><a href="#cb28-411" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"b: </span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb28-412"><a href="#cb28-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-413"><a href="#cb28-413" aria-hidden="true" tabindex="-1"></a>g1 <span class="op">=</span> [<span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb28-414"><a href="#cb28-414" aria-hidden="true" tabindex="-1"></a>g2 <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb28-415"><a href="#cb28-415" aria-hidden="true" tabindex="-1"></a>g3 <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb28-416"><a href="#cb28-416" aria-hidden="true" tabindex="-1"></a>g4 <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb28-417"><a href="#cb28-417" aria-hidden="true" tabindex="-1"></a>g5 <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb28-418"><a href="#cb28-418" aria-hidden="true" tabindex="-1"></a>g6 <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>]</span>
<span id="cb28-419"><a href="#cb28-419" aria-hidden="true" tabindex="-1"></a>g7 <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb28-420"><a href="#cb28-420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-421"><a href="#cb28-421" aria-hidden="true" tabindex="-1"></a>g8 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb28-422"><a href="#cb28-422" aria-hidden="true" tabindex="-1"></a>g9 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb28-423"><a href="#cb28-423" aria-hidden="true" tabindex="-1"></a>g10 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb28-424"><a href="#cb28-424" aria-hidden="true" tabindex="-1"></a>g11 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb28-425"><a href="#cb28-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-426"><a href="#cb28-426" aria-hidden="true" tabindex="-1"></a>g12 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb28-427"><a href="#cb28-427" aria-hidden="true" tabindex="-1"></a>g13 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb28-428"><a href="#cb28-428" aria-hidden="true" tabindex="-1"></a>g14 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb28-429"><a href="#cb28-429" aria-hidden="true" tabindex="-1"></a>g15 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb28-430"><a href="#cb28-430" aria-hidden="true" tabindex="-1"></a>g16 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb28-431"><a href="#cb28-431" aria-hidden="true" tabindex="-1"></a>g17 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb28-432"><a href="#cb28-432" aria-hidden="true" tabindex="-1"></a>g18 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>]</span>
<span id="cb28-433"><a href="#cb28-433" aria-hidden="true" tabindex="-1"></a>g19 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb28-434"><a href="#cb28-434" aria-hidden="true" tabindex="-1"></a>g20 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb28-435"><a href="#cb28-435" aria-hidden="true" tabindex="-1"></a>g21 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>]</span>
<span id="cb28-436"><a href="#cb28-436" aria-hidden="true" tabindex="-1"></a>g22 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>]</span>
<span id="cb28-437"><a href="#cb28-437" aria-hidden="true" tabindex="-1"></a>g23 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb28-438"><a href="#cb28-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-439"><a href="#cb28-439" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> np.array([g1,g2,g3,g4,g5,g6,g7,g8,g9,g10,g11,g12,g13,g14,g15,g16,g17,g18,g19,g20,g21,g22,g23])</span>
<span id="cb28-440"><a href="#cb28-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-441"><a href="#cb28-441" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"A: </span><span class="sc">{</span>A<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb28-442"><a href="#cb28-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-443"><a href="#cb28-443" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-444"><a href="#cb28-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-445"><a href="#cb28-445" aria-hidden="true" tabindex="-1"></a>Then, I could use least squares to find the best solution v for the system which  gave me the below values. This is the potential of each school. The team with the higher potential is obviously the better team. A way to reach this conclusion is considering that that number corresponding to the school is the base potential spread and depending on the team you're facing, your potential spread will increase or decrease, increase if the other team's potential is negative and decrease if the other team's potential is positive.</span>
<span id="cb28-446"><a href="#cb28-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-449"><a href="#cb28-449" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb28-450"><a href="#cb28-450" aria-hidden="true" tabindex="-1"></a>v, <span class="op">*</span>_ <span class="op">=</span> lstsq(A, b)</span>
<span id="cb28-451"><a href="#cb28-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-452"><a href="#cb28-452" aria-hidden="true" tabindex="-1"></a>schools <span class="op">=</span> games.index.to_list()</span>
<span id="cb28-453"><a href="#cb28-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-454"><a href="#cb28-454" aria-hidden="true" tabindex="-1"></a>potentials <span class="op">=</span> pd.DataFrame(v, index <span class="op">=</span> schools, columns <span class="op">=</span> [<span class="st">"Potential"</span>])</span>
<span id="cb28-455"><a href="#cb28-455" aria-hidden="true" tabindex="-1"></a>display(potentials)</span>
<span id="cb28-456"><a href="#cb28-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-457"><a href="#cb28-457" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-458"><a href="#cb28-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-459"><a href="#cb28-459" aria-hidden="true" tabindex="-1"></a>We can iteratively calculate every difference between the potentials of the schools to see the point spread in every potential matchup.</span>
<span id="cb28-460"><a href="#cb28-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-463"><a href="#cb28-463" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb28-464"><a href="#cb28-464" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> combinations</span>
<span id="cb28-465"><a href="#cb28-465" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, j <span class="kw">in</span> combinations(schools, <span class="dv">2</span>):</span>
<span id="cb28-466"><a href="#cb28-466" aria-hidden="true" tabindex="-1"></a>  difference <span class="op">=</span> v[schools.index(i)] <span class="op">-</span> v[schools.index(j)]</span>
<span id="cb28-467"><a href="#cb28-467" aria-hidden="true" tabindex="-1"></a>  difference <span class="op">=</span> np.<span class="bu">round</span>(difference,<span class="dv">2</span>)</span>
<span id="cb28-468"><a href="#cb28-468" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> - </span><span class="sc">{</span>j<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>difference<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb28-469"><a href="#cb28-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-470"><a href="#cb28-470" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-471"><a href="#cb28-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-472"><a href="#cb28-472" aria-hidden="true" tabindex="-1"></a>When backtesting our model, we can see that the predicted results not accurate. For the missing games, the same teams faced each other twice and I took the average and compared it to the predicted. The predicted between Harvard and Dartmouth was extremely off whereas the predicted between Harvard and Cornell were quite close.</span>
<span id="cb28-473"><a href="#cb28-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-476"><a href="#cb28-476" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb28-477"><a href="#cb28-477" aria-hidden="true" tabindex="-1"></a>predicted <span class="op">=</span> pd.read_csv(<span class="st">"/Users/zheng/Downloads/UChicago/Sophomore Year/Applications in Linear Algebra/project2/2023-2024 Ivy Conference Games - Sheet2.csv"</span>).set_index(<span class="st">"DIFFERENCE"</span>)</span>
<span id="cb28-478"><a href="#cb28-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-479"><a href="#cb28-479" aria-hidden="true" tabindex="-1"></a>display(predicted)</span>
<span id="cb28-480"><a href="#cb28-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-481"><a href="#cb28-481" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-482"><a href="#cb28-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-483"><a href="#cb28-483" aria-hidden="true" tabindex="-1"></a>These results obviously show that this model is not sufficent. A simple way to increase accuracy is by increasing the games sampled. However, this is still difficult as these teams play each other twice every season (year) so we'd have to sample across years. Doing that will introduce more factors such as the players graduating and leaving the team or the team getting new players.</span>
<span id="cb28-484"><a href="#cb28-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-485"><a href="#cb28-485" aria-hidden="true" tabindex="-1"></a>Predicting the outcomes of games are very popular and can get very sophisticated, mostly because of the monetary gain on betting platforms. One can use a more complicated model such as forest algorithms and deep learning. </span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>
